<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ë³‘ì› - AI ì±—ë´‡</title>
    
    <!-- ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € ìºì‹œ ë°©ì§€ ê°•í™” -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="address=no">
    <meta name="format-detection" content="email=no">
    <!-- ê°•ë ¥í•œ ìºì‹œ ë²„ìŠ¤í„° -->
    <meta name="cache-buster" content="<?= time() ?>">
    <link rel="stylesheet" href="data:text/css;base64,LyogRm9yY2UgcmVmcmVzaCAqLw==">
    <script>
        // ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ê°•ì œ ìƒˆë¡œê³ ì¹¨
        if (navigator.userAgent.includes('KAKAO')) {
            if (performance.navigation.type !== 1) {
                setTimeout(() => window.location.reload(), 100);
            }
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-text-size-adjust: 100%;
            -webkit-touch-callout: none;
            height: 100vh;
            height: 100dvh; /* Dynamic viewport height for mobile */
            overflow: hidden;
            /* iOS Safe Area ì§€ì› */
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ ì œê±° - ê³µê°„ ì ˆì•½ì„ ìœ„í•´ ì‚­ì œ */

        /* ì±„íŒ…ì°½ ë‚´ ê´€ë¦¬ì ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .admin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4) !important;
        }

        /* ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2px 10px;
        }

        /* ì±—ë´‡ ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .chatbot-main {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            height: 99vh;
            height: 99dvh; /* Dynamic viewport height for mobile */
            display: flex;
            flex-direction: column;
            position: relative;
            /* ëª¨ë°”ì¼ í„°ì¹˜ ìµœì í™” */
            -webkit-overflow-scrolling: touch;
            touch-action: manipulation;
        }

        /* ì±—ë´‡ í—¤ë” - ê°•ë ¥í•œ ìš°ì„ ìˆœìœ„ */
        .chatbot-main .chatbot-header,
        div.chatbot-main div.chatbot-header,
        .chatbot-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%) !important;
            color: white !important;
            padding: 18px !important;
            text-align: center !important;
            position: relative !important;
            font-size: 22px !important;
        }

        .chatbot-main .home-button,
        div.chatbot-main button.home-button,
        .home-button {
            position: absolute !important;
            left: 15px !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            background: rgba(255, 255, 255, 0.2) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 15px !important;
            width: 68px !important;
            height: 75px !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            cursor: pointer !important;
            color: white !important;
            transition: all 0.3s ease !important;
            padding: 4px !important;
        }

        .home-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .chatbot-main .home-icon,
        div.chatbot-main .home-icon,
        .home-icon {
            font-size: 27px !important;
            line-height: 1 !important;
        }

        .chatbot-main .home-arrow,
        div.chatbot-main .home-arrow,
        .home-arrow {
            font-size: 17px !important;
            line-height: 1 !important;
            margin-top: 3px !important;
        }

        .chatbot-main .chatbot-title,
        div.chatbot-main div.chatbot-title,
        .chatbot-title {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 8px !important;
            font-weight: bold !important;
            font-size: 22px !important;
        }

        /* ì±—ë´‡ ë©”ì‹œì§€ ì˜ì—­ - ê°•ë ¥í•œ ìš°ì„ ìˆœìœ„ */
        .chatbot-main .chatbot-messages,
        div.chatbot-main div.chatbot-messages,
        .chatbot-messages {
            flex: 1 !important;
            padding: 10px !important;
            overflow-y: auto !important;
            background: #f8f9fa !important;
            min-height: 350px !important;
            max-height: calc(100vh - 280px) !important;
            max-height: calc(100dvh - 280px) !important;
            /* ëª¨ë°”ì¼ ìŠ¤í¬ë¡¤ ìµœì í™” */
            -webkit-overflow-scrolling: touch !important;
            scroll-behavior: smooth !important;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .message.user .message-avatar {
            background: #e9ecef;
            color: #495057;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.4;
            font-size: 14px;
        }

        .message.bot .message-content {
            background: white;
            color: #333;
            border-bottom-left-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .message.user .message-content {
            background: #4facfe;
            color: white;
            border-bottom-right-radius: 6px;
        }

        /* ë¹ ë¥¸ ë²„íŠ¼ */
        .quick-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .quick-button {
            background: #f0f8ff;
            color: #4facfe;
            border: 1px solid #4facfe;
            border-radius: 15px;
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-button:hover {
            background: #4facfe;
            color: white;
        }

        /* ì–¸ì–´ ì„ íƒ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .language-btn {
            background: #4facfe;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .language-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .language-btn.selected {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
        }

        /* ì–¸ì–´ ì„ íƒ ì˜ì—­ - ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì €ì™€ Galaxy XCover 5 ìµœì í™” */
        .language-selector {
            position: relative !important;
            background: #f8f9fa !important;
            border-top: 1px solid #e9ecef !important;
            padding: 10px 18px 18px 18px !important;
            text-align: center !important;
            min-height: 60px !important;
            box-sizing: border-box !important;
            /* ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ìµœì í™” */
            -webkit-touch-callout: none !important;
            -webkit-user-select: none !important;
            user-select: none !important;
            touch-action: manipulation !important;
            /* ì˜ë¦¼ ë°©ì§€ */
            z-index: 10 !important;
            flex-shrink: 0 !important;
        }

        .language-selector div {
            font-size: 14px !important;
            color: #6c757d !important;
            margin-bottom: 8px !important;
            font-weight: 600 !important;
        }

        .language-buttons {
            display: flex !important;
            justify-content: center !important;
            gap: 8px !important;
            flex-wrap: wrap !important;
            align-items: center !important;
        }

        .reservation-link-btn {
            background: #ffd700;
            color: #333;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            display: inline-block;
            transition: all 0.2s;
        }

        .reservation-link-btn:hover {
            background: #ffed4e;
            transform: translateY(-1px);
        }

        /* ì±—ë´‡ ì…ë ¥ ì˜ì—­ - ê°•ë ¥í•œ ìš°ì„ ìˆœìœ„ */
        .chatbot-main .chatbot-input,
        div.chatbot-main div.chatbot-input,
        .chatbot-input {
            padding: 18px !important;
            background: white !important;
            border-top: 1px solid #e9ecef !important;
            display: flex !important;
            gap: 12px !important;
            margin-top: -10px !important;
        }

        .chatbot-main .chatbot-input textarea,
        div.chatbot-main div.chatbot-input textarea,
        .chatbot-input textarea {
            flex: 1 !important;
            padding: 18px 24px !important;
            border: 1px solid #ddd !important;
            border-radius: 25px !important;
            outline: none !important;
            font-size: 22px !important;
            resize: none !important;
            min-height: 65px !important;
            max-height: 140px !important;
            font-family: inherit !important;
            touch-action: manipulation !important;
        }

        .chatbot-input textarea:focus {
            border-color: #4facfe;
        }

        .chatbot-main .chatbot-send,
        div.chatbot-main button.chatbot-send,
        .chatbot-send {
            background: #4facfe !important;
            color: white !important;
            border: none !important;
            border-radius: 25px !important;
            min-width: 108px !important;
            cursor: pointer !important;
            font-size: 21px !important;
            font-weight: bold !important;
            transition: all 0.3s !important;
            padding: 18px 26px !important;
        }

        .chatbot-send:hover {
            background: #3d8bfe;
        }

        /* ë©”ì¸ í˜ì´ì§€ ì´ë™ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .main-page-link {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
        }

        .main-page-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
        }

        .main-page-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.4);
        }

        .main-page-btn:active {
            transform: translateY(0);
        }

        /* íŒì—… í˜ì´ì§€ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .popup-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 2000;
            overflow-y: auto;
        }

        /* ê´€ë¦¬ì í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .admin-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-title {
            font-size: 24px;
            font-weight: bold;
        }

        .admin-nav {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .nav-btn:hover {
            background: #2980b9;
        }

        .nav-btn.logout {
            background: #e74c3c;
        }

        .nav-btn.logout:hover {
            background: #c0392b;
        }

        .admin-content {
            padding: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .admin-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h3 {
            margin: 0;
            color: #2c3e50;
            font-size: 20px;
        }

        /* API ì„¤ì • ìŠ¤íƒ€ì¼ */
        .api-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #4facfe;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        .btn-primary {
            background: #4facfe;
            color: white;
        }

        .btn-primary:hover {
            background: #3d8bfe;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .status-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            display: none;
            white-space: pre-line;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* íŒŒì¼ ì—…ë¡œë“œ ìŠ¤íƒ€ì¼ */
        .upload-area {
            border: 2px dashed #4facfe;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-area:hover {
            border-color: #3d8bfe;
            background: #f0f8ff;
        }

        .upload-area.dragover {
            border-color: #28a745;
            background: #f8fff8;
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 48px;
            color: #4facfe;
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 16px;
            color: #666;
            margin-bottom: 10px;
        }

        .upload-types {
            font-size: 12px;
            color: #999;
        }

        .file-input {
            display: none;
        }

        .file-list {
            margin-top: 20px;
        }

        .file-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .file-details {
            font-size: 12px;
            color: #666;
        }

        .file-actions {
            display: flex;
            gap: 10px;
        }

        .file-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        /* ëª¨ë°”ì¼ ì•ˆì •ì„± ê°•í™” */
        * {
            -webkit-tap-highlight-color: transparent;
        }

        input, textarea, select, button {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        /* íƒœë¸”ë¦¿ ë° í° í° (768px ì´í•˜) */
        @media (max-width: 768px) {
            body {
                padding: 0 !important; /* Safe area íŒ¨ë”© ì œê±° */
            }
            
            .container {
                padding: 0 !important;
                margin: 0 !important;
            }
            
            .chatbot-main {
                height: 100vh !important;
                height: 100dvh !important;
                border-radius: 8px !important;
                margin: 0 !important;
            }

            .chatbot-messages {
                max-height: calc(100vh - 90px) !important;
                max-height: calc(100dvh - 90px) !important;
                padding: 8px !important;
            }
            
            .chatbot-header {
                padding: 8px !important;
            }
            
            .chatbot-input {
                padding: 10px !important;
                /* í‚¤ë³´ë“œ ì˜¬ë¼ì˜¬ ë•Œ ê³ ì • ìœ„ì¹˜ */
                position: sticky !important;
                bottom: 0 !important;
                background: white !important;
                z-index: 10 !important;
            }
            
            .chatbot-input textarea {
                padding: 10px 14px !important;
                min-height: 40px !important;
                font-size: 16px !important;
            }
            
            .chatbot-send {
                padding: 10px 15px !important;
                min-width: 70px !important;
                font-size: 14px !important;
            }
        }

        /* ì¤‘ê°„ í¬ê¸° í° (480px ì´í•˜) - ì•„ì´í° 14 Pro Max, ê°¤ëŸ­ì‹œ Note ë“± */
        @media (max-width: 480px) {
            .container {
                padding: 0 !important;
                margin: 0 !important;
            }
            
            .chatbot-main {
                height: 100vh !important;
                height: 100dvh !important;
                border-radius: 0 !important;
                margin: 0 !important;
            }

            .chatbot-messages {
                max-height: calc(100vh - 80px) !important;
                max-height: calc(100dvh - 80px) !important;
                padding: 8px !important;
            }
            
            .chatbot-header {
                padding: 6px !important;
            }
            
            .home-button {
                width: 32px !important;
                height: 38px !important;
                left: 6px !important;
            }
            
            .home-icon {
                font-size: 14px !important;
            }
            
            .home-arrow {
                font-size: 8px !important;
                margin-top: 1px !important;
            }
            
            .chatbot-title {
                font-size: 14px !important;
            }
            
            .chatbot-input {
                padding: 8px !important;
                position: sticky !important;
                bottom: 0 !important;
                background: white !important;
                z-index: 10 !important;
            }
            
            .chatbot-input textarea {
                padding: 8px 12px !important;
                min-height: 38px !important;
                font-size: 16px !important;
                border-radius: 18px !important;
            }
            
            .chatbot-send {
                padding: 8px 12px !important;
                min-width: 60px !important;
                font-size: 14px !important;
            }
        }

        /* ì•„ì´í° 14/13/12 í‘œì¤€ í¬ê¸° ë° ì•„ì´í° 11 (430px ì´í•˜) */
        @media (max-width: 430px) {
            .chatbot-messages {
                max-height: calc(100vh - 80px) !important;
                max-height: calc(100dvh - 80px) !important;
                padding: 8px !important;
            }
            
            .chatbot-header {
                padding: 12px !important;
            }
            
            .chatbot-input {
                padding: 12px !important;
                margin-top: -3px !important;
            }
            
            .chatbot-input textarea {
                padding: 12px 16px !important;
                min-height: 48px !important;
                font-size: 17px !important;
            }
            
            .chatbot-send {
                padding: 12px 18px !important;
                min-width: 75px !important;
                font-size: 16px !important;
            }
            
            .home-button {
                width: 45px !important;
                height: 50px !important;
                left: 8px !important;
            }
            
            .home-icon {
                font-size: 18px !important;
            }
            
            .home-arrow {
                font-size: 11px !important;
                margin-top: 2px !important;
            }
            
            .chatbot-title {
                font-size: 17px !important;
            }
        }

        /* ì•„ì´í° 14/13/12 ë¯¸ë‹ˆ, ì•„ì´í° SE (390px ì´í•˜) */
        @media (max-width: 390px) {
            .chatbot-messages {
                max-height: calc(100vh - 75px) !important;
                max-height: calc(100dvh - 75px) !important;
                padding: 8px !important;
            }
            
            .chatbot-header {
                padding: 10px !important;
            }
            
            .chatbot-input {
                padding: 10px !important;
                margin-top: -3px !important;
            }
            
            .chatbot-input textarea {
                padding: 10px 14px !important;
                min-height: 45px !important;
                font-size: 16px !important;
            }
            
            .chatbot-send {
                padding: 10px 15px !important;
                min-width: 65px !important;
                font-size: 15px !important;
            }
            
            .home-button {
                width: 40px !important;
                height: 45px !important;
                left: 6px !important;
            }
            
            .home-icon {
                font-size: 16px !important;
            }
            
            .home-arrow {
                font-size: 10px !important;
                margin-top: 2px !important;
            }
            
            .chatbot-title {
                font-size: 15px !important;
            }
        }

        /* ì•„ì´í° SE, ì‘ì€ ì•ˆë“œë¡œì´ë“œ (375px ì´í•˜) */
        @media (max-width: 375px) {
            .chatbot-messages {
                max-height: calc(100vh - 70px) !important;
                max-height: calc(100dvh - 70px) !important;
                padding: 7px !important;
            }
            
            .chatbot-header {
                padding: 8px !important;
            }
            
            .chatbot-input {
                padding: 8px !important;
                margin-top: -2px !important;
            }
            
            .chatbot-input textarea {
                padding: 8px 12px !important;
                min-height: 42px !important;
                font-size: 15px !important;
            }
            
            .chatbot-send {
                padding: 8px 12px !important;
                min-width: 60px !important;
                font-size: 14px !important;
            }
            
            .home-button {
                width: 36px !important;
                height: 42px !important;
                left: 5px !important;
            }
            
            .home-icon {
                font-size: 14px !important;
            }
            
            .home-arrow {
                font-size: 8px !important;
                margin-top: 2px !important;
            }
            
            .chatbot-title {
                font-size: 14px !important;
            }
        }

        /* ê°¤ëŸ­ì‹œ A ì‹œë¦¬ì¦ˆ, ì‘ì€ ì•ˆë“œë¡œì´ë“œ (360px ì´í•˜) */
        @media (max-width: 360px) {
            .chatbot-messages {
                max-height: calc(100vh - 60px) !important;
                max-height: calc(100dvh - 60px) !important;
                padding: 4px !important;
            }
            
            .chatbot-header {
                padding: 2px !important;
            }
            
            .chatbot-input {
                padding: 3px !important;
            }
            
            .chatbot-input textarea {
                padding: 4px 6px !important;
                min-height: 30px !important;
                font-size: 16px !important;
            }
            
            .chatbot-send {
                padding: 4px 6px !important;
                min-width: 40px !important;
                font-size: 11px !important;
            }
            
            .home-button {
                width: 24px !important;
                height: 30px !important;
                left: 2px !important;
            }
            
            .home-icon {
                font-size: 10px !important;
            }
            
            .home-arrow {
                font-size: 4px !important;
                margin-top: 1px !important;
            }
            
            .chatbot-title {
                font-size: 10px !important;
            }
        }

        /* ë§¤ìš° ì‘ì€ ê¸°ê¸° (320px ì´í•˜) */
        @media (max-width: 320px) {
            .chatbot-messages {
                max-height: calc(100vh - 55px) !important;
                max-height: calc(100dvh - 55px) !important;
                padding: 3px !important;
            }
            
            .chatbot-header {
                padding: 1px !important;
            }
            
            .chatbot-input {
                padding: 2px !important;
            }
            
            .chatbot-input textarea {
                padding: 3px 5px !important;
                min-height: 28px !important;
                font-size: 16px !important;
            }
            
            .chatbot-send {
                padding: 3px 5px !important;
                min-width: 35px !important;
                font-size: 10px !important;
            }
            
            .home-button {
                width: 22px !important;
                height: 28px !important;
                left: 1px !important;
            }
            
            .home-icon {
                font-size: 9px !important;
            }
            
            .home-arrow {
                font-size: 3px !important;
                margin-top: 1px !important;
            }
            
            .chatbot-title {
                font-size: 9px !important;
            }
        }

        /* ì„¸ë¡œ í™”ë©´ì´ ë§¤ìš° ì§§ì€ ê¸°ê¸° ëŒ€ì‘ */
        @media (max-height: 600px) {
            .chatbot-main {
                height: 100vh !important;
                height: 100dvh !important;
            }
            
            .chatbot-messages {
                max-height: calc(100vh - 65px) !important;
                max-height: calc(100dvh - 65px) !important;
            }
            
            .chatbot-header {
                padding: 3px !important;
            }
            
            .chatbot-input {
                padding: 4px !important;
                position: sticky !important;
                bottom: 0 !important;
                background: white !important;
                z-index: 10 !important;
            }
            
            .chatbot-input textarea {
                padding: 6px 8px !important;
                min-height: 32px !important;
            }
            
            .chatbot-send {
                padding: 6px 8px !important;
                min-width: 50px !important;
            }
        }

        /* ê´€ë¦¬ì í˜ì´ì§€ ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 768px) {
            .admin-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .btn-group {
                flex-wrap: wrap;
            }
        }

        /* Galaxy XCover 5 ì‹œë¦¬ì¦ˆ (SM-G525N) íŠ¹ë³„ ìµœì í™” */
        @media screen and (max-width: 432px) and (max-height: 900px) {
            .chatbot-main {
                height: 100vh !important;
                min-height: 100vh !important;
            }

            .chatbot-messages {
                max-height: calc(100vh - 300px) !important;
                max-height: calc(100dvh - 300px) !important;
            }

            .language-selector {
                position: sticky !important;
                bottom: 0 !important;
                background: #f8f9fa !important;
                border-top: 2px solid #e9ecef !important;
                padding: 8px 15px 15px 15px !important;
                min-height: 55px !important;
                z-index: 50 !important;
            }

            .language-buttons {
                gap: 6px !important;
            }

            .language-btn {
                padding: 5px 10px !important;
                font-size: 12px !important;
            }
        }

        /* ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € íŠ¹ë³„ ìµœì í™” */
        @media screen and (max-width: 500px) {
            /* ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ê°ì§€ ë° ìµœì í™” */
            .chatbot-main {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                height: 100dvh !important;
                overflow: hidden !important;
                display: flex !important;
                flex-direction: column !important;
            }

            .chatbot-messages {
                flex: 1 !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
                max-height: none !important;
            }

            .chatbot-input {
                flex-shrink: 0 !important;
                position: relative !important;
                bottom: 0 !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }

            .language-selector {
                position: relative !important;
                bottom: 0 !important;
                left: 0 !important;
                width: 100% !important;
                flex-shrink: 0 !important;
                background: #f8f9fa !important;
                border-top: 2px solid #e9ecef !important;
                padding: 8px 15px 15px 15px !important;
                min-height: 55px !important;
                z-index: 100 !important;
                box-sizing: border-box !important;
            }

            .language-selector div {
                font-size: 13px !important;
                margin-bottom: 6px !important;
            }

            .language-buttons {
                justify-content: center !important;
                gap: 6px !important;
                flex-wrap: wrap !important;
            }

            .language-btn {
                padding: 5px 10px !important;
                font-size: 12px !important;
                border-radius: 12px !important;
                touch-action: manipulation !important;
                -webkit-touch-callout: none !important;
                -webkit-user-select: none !important;
                user-select: none !important;
            }
        }

        /* ì´ˆì†Œí˜• ê¸°ê¸° (Galaxy XCover 5 í¬í•¨) ì¶”ê°€ ìµœì í™” */
        @media screen and (max-width: 432px) and (max-height: 800px) {
            .chatbot-main {
                height: calc(100vh - 10px) !important;
                height: calc(100dvh - 10px) !important;
            }

            .chatbot-messages {
                max-height: calc(100vh - 320px) !important;
                max-height: calc(100dvh - 320px) !important;
                padding: 8px !important;
            }

            .language-selector {
                padding: 6px 12px 12px 12px !important;
                min-height: 50px !important;
            }

            .language-selector div {
                font-size: 12px !important;
                margin-bottom: 5px !important;
            }

            .language-btn {
                padding: 4px 8px !important;
                font-size: 11px !important;
            }
        }
    </style>
</head>
<body>
    <!-- í—¤ë” ì‚­ì œ - ê³µê°„ ì ˆì•½ì„ ìœ„í•´ ì œê±° -->

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container">
        <div class="chatbot-main">
            <!-- ì±—ë´‡ í—¤ë” -->
            <div class="chatbot-header" style="padding: 18px !important; font-size: 22px !important;">
                <button class="home-button" onclick="goToMainPage()" title="ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™" style="width: 68px !important; height: 75px !important; left: 15px !important;">
                <div class="home-icon" style="font-size: 27px !important;">ğŸ </div>
                <div class="home-arrow" style="font-size: 17px !important; margin-top: 3px !important;">â†</div>
            </button>
                <div class="chatbot-title" style="font-size: 22px !important; font-weight: bold !important;">
                    <span>í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ AI ìƒë‹´ì‚¬ğŸ‘©â€âš•ï¸</span>
                </div>
            </div>
            
            <!-- ì±—ë´‡ ë©”ì‹œì§€ ì˜ì—­ -->
            <div class="chatbot-messages" id="chatbotMessages2" style="max-height: calc(100vh - 280px) !important; max-height: calc(100dvh - 280px) !important;">
                <!-- ì´ˆê¸° í™˜ì˜ ë©”ì‹œì§€ -->
                <div class="message bot">
                    <div class="message-avatar">ğŸ‘©â€âš•ï¸</div>
                    <div class="message-content">
                        ì•ˆë…•í•˜ì„¸ìš”! í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤. ğŸ˜Š<br><br>
                        <div class="quick-buttons">
                            <button class="quick-button" onclick="sendQuickMessage2('ì§„ë£Œì‹œê°„ ì•Œë ¤ì£¼ì„¸ìš”')">ì§„ë£Œì‹œê°„</button>
                            <button class="quick-button" onclick="sendQuickMessage2('ì˜ˆì•½í•˜ê³  ì‹¶ì–´ìš”')">ì˜ˆì•½ë¬¸ì˜</button>
                            <button class="quick-button" onclick="sendQuickMessage2('ì¹˜ë£Œë¹„ìš© ê¶ê¸ˆí•´ìš”')">ì¹˜ë£Œë¹„ìš©</button>
                            <button class="quick-button" onclick="sendQuickMessage2('ìœ„ì¹˜ ì•Œë ¤ì£¼ì„¸ìš”')">ì˜¤ì‹œëŠ”ê¸¸</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì±—ë´‡ ì…ë ¥ ì˜ì—­ -->
            <div class="chatbot-input" style="padding: 18px !important; margin-top: -10px !important;">
                <textarea id="chatbotInput2" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”... (Shift+Enter: ì „ì†¡)" onkeypress="handleChatKeyPress2(event)" rows="1" style="padding: 18px 24px !important; font-size: 22px !important; min-height: 65px !important; border-radius: 25px !important;"></textarea>
                <button class="chatbot-send" onclick="sendMessage2()" style="padding: 18px 26px !important; font-size: 21px !important; min-width: 108px !important; border-radius: 25px !important;">ì „ì†¡</button>
            </div>
            
            <!-- ì–¸ì–´ ì„ íƒ ë²„íŠ¼ ì„¹ì…˜ -->
            <div class="language-selector">
                <div>
                    AIìƒë‹´ì‚¬ ì–¸ì–´ ì„ íƒ 
                </div>
                <div class="language-buttons">
                    <button class="language-btn" onclick="setLanguage2('ko')" id="langBtn-ko-2" style="background: #4facfe; color: white;">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
                    <button class="language-btn" onclick="setLanguage2('en')" id="langBtn-en-2" style="background: #667eea; color: white;">ğŸ‡ºğŸ‡¸ ì˜ì–´</button>
                    <button class="language-btn" onclick="setLanguage2('ru')" id="langBtn-ru-2" style="background: #f093fb; color: white;">ğŸ‡·ğŸ‡º ëŸ¬ì‹œì•„ì–´</button>
                    <button class="language-btn" onclick="setLanguage2('ja')" id="langBtn-ja-2" style="background: #fcb69f; color: #333;">ğŸ‡¯ğŸ‡µ ì¼ë³¸ì–´</button>
                </div>
            </div>
        </div>
    </div>

    <!-- AI ì±—ë´‡ ê´€ë¦¬ í˜ì´ì§€ -->
    <div class="popup-page" id="chatbotAdminPage2">
        <div class="admin-header">
            <div class="admin-title">ğŸ¤– AI ì±—ë´‡ ê´€ë¦¬ ì‹œìŠ¤í…œ 2</div>
            <div class="admin-nav">
                <button class="nav-btn" onclick="closeChatbotAdmin2()">ğŸ  ë©”ì¸ìœ¼ë¡œ</button>
                <button class="nav-btn logout" onclick="closeChatbotAdmin2()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
        
        <div class="admin-content">
            <!-- AI ëª¨ë¸ API ì„¤ì • -->
            <div class="admin-section">
                <div class="section-header">
                    <h3>ğŸ¤– ì±—ë´‡ AI ëª¨ë¸ ì—°ê²°í•˜ê¸°</h3>
                </div>
                
                <div class="api-form">
                    <!-- ChatGPT ì„¤ì • -->
                    <div class="form-group">
                        <label for="chatgptApiKey2">ChatGPT API Key</label>
                        <input type="password" id="chatgptApiKey2" placeholder="sk-proj-...">
                    </div>
                    <div class="form-group">
                        <label for="chatgptModel2">ChatGPT ëª¨ë¸ì„ íƒ</label>
                        <select id="chatgptModel2" onchange="toggleFinetuningInput2('chatgpt')">
                            <option value="">-- ChatGPT ëª¨ë¸ì„ ì„ íƒí•˜ì„¸ìš” --</option>
                            <option value="gpt-4o">GPT-4o (ìµœì‹  ë©€í‹°ëª¨ë‹¬)</option>
                            <option value="gpt-4o-mini">GPT-4o Mini (ê²½ì œì )</option>
                            <option value="finetuning">Finetuning Model (ì»¤ìŠ¤í…€ ëª¨ë¸)</option>
                        </select>
                    </div>
                    <div class="form-group" id="chatgptFinetuningGroup2" style="display: none;">
                        <label for="chatgptFinetuningModel2">Finetuning ëª¨ë¸ëª… ì…ë ¥</label>
                        <input type="text" id="chatgptFinetuningModel2" placeholder="ft:gpt-4o-mini-2024-07-18:...">
                    </div>

                    <!-- Gemini ì„¤ì • -->
                    <div class="form-group" style="margin-top: 25px;">
                        <label for="geminiApiKey2">Gemini ëª¨ë¸ API Key</label>
                        <input type="password" id="geminiApiKey2" placeholder="AIza...">
                    </div>
                    <div class="form-group">
                        <label for="geminiModel2">Gemini ëª¨ë¸ì„ íƒ</label>
                        <select id="geminiModel2">
                            <option value="">-- Gemini ëª¨ë¸ì„ ì„ íƒí•˜ì„¸ìš” --</option>
                            <option value="gemini-1.5-flash">Gemini 1.5 Flash (ë¹ ë¥¸ ì‘ë‹µ)</option>
                            <option value="gemini-1.5-pro">Gemini 1.5 Pro (ê³ ì„±ëŠ¥)</option>
                            <option value="gemini-1.0-pro">Gemini 1.0 Pro (ì•ˆì •ì„±)</option>
                        </select>
                    </div>

                    <!-- Claude ì„¤ì • -->
                    <div class="form-group" style="margin-top: 25px;">
                        <label for="claudeApiKey2">Claude ëª¨ë¸ API Key</label>
                        <input type="password" id="claudeApiKey2" placeholder="sk-ant-...">
                    </div>
                    <div class="form-group">
                        <label for="claudeModel2">Claude ëª¨ë¸ì„ íƒ</label>
                        <select id="claudeModel2">
                            <option value="">-- Claude ëª¨ë¸ì„ ì„ íƒí•˜ì„¸ìš” --</option>
                            <option value="claude-3-haiku">Claude 3 Haiku (ë¹ ë¥´ê³  íš¨ìœ¨ì )</option>
                            <option value="claude-3-sonnet">Claude 3 Sonnet (ê· í˜•ì  ì„±ëŠ¥)</option>
                            <option value="claude-3-opus">Claude 3 Opus (ìµœê³  ì„±ëŠ¥)</option>
                            <option value="claude-3-5-sonnet">Claude 3.5 Sonnet (ìµœì‹  ëª¨ë¸)</option>
                        </select>
                    </div>

                    <div class="btn-group" style="margin-top: 30px;">
                        <button class="btn btn-primary" onclick="saveApiSettings2()">ğŸ’¾ ì„¤ì • ì €ì¥</button>
                        <button class="btn btn-success" onclick="testApiConnection2()">ğŸ”— ì—°ê²° í…ŒìŠ¤íŠ¸</button>
                        <button class="btn btn-danger" onclick="resetApiSettings2()">ğŸ”„ ì„¤ì • ì´ˆê¸°í™”</button>
                    </div>
                    <div id="apiStatus2" class="status-message"></div>
                </div>
            </div>

            <!-- AI ì§€ì‹ íŒŒì¼ ì—…ë¡œë“œ -->
            <div class="admin-section">
                <div class="section-header">
                    <h3>ğŸ“š AI ì§€ì‹ íŒŒì¼ ì—…ë¡œë“œ</h3>
                </div>
                
                <div class="upload-area" onclick="document.getElementById('fileInput2').click()" ondrop="handleFileDrop2(event)" ondragover="handleDragOver2(event)" ondragleave="handleDragLeave2(event)">
                    <div class="upload-icon">ğŸ“</div>
                    <div class="upload-text">í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ì—¬ê¸°ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”</div>
                    <div class="upload-types">ğŸ’¡ <strong>ì§€ì› í˜•ì‹: í…ìŠ¤íŠ¸ íŒŒì¼(.txt)</strong><br>
                    <small style="color: #666;">â€» PDF, Excel íŒŒì¼ì€ ë‚´ìš©ì„ ë³µì‚¬í•´ì„œ í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ì €ì¥ í›„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”</small></div>
                </div>
                <input type="file" id="fileInput2" class="file-input" accept=".txt" multiple onchange="handleFileUpload2(event)">
                
                <div class="file-list" id="fileList2">
                    <!-- ì—…ë¡œë“œëœ íŒŒì¼ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
                
                <div id="knowledgeStatus2" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; font-size: 14px;">
                    ğŸ“– ì—…ë¡œë“œëœ ì§€ì‹ íŒŒì¼: 0ê°œ | ìƒíƒœ: ë¹„í™œì„±
                </div>
                
                <!-- ì§€ì‹ íŒŒì¼ ì„¤ì • ì €ì¥ ë²„íŠ¼ -->
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="saveKnowledgeSettings2()">ğŸ’¾ ì§€ì‹ íŒŒì¼ ì„¤ì • ì €ì¥</button>
                    <button class="btn btn-primary" onclick="testKnowledgeBase2()">ğŸ” ì§€ì‹ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸</button>
                    <button class="btn" style="background: #17a2b8; color: white;" onclick="showParsedData2()">ğŸ“‹ íŒŒì‹±ëœ Q&A ë³´ê¸°</button>
                    <button class="btn btn-danger" onclick="clearAllKnowledge2()">ğŸ—‘ï¸ ëª¨ë“  ì§€ì‹ ì‚­ì œ</button>
                </div>
                <div id="knowledgeSettingsStatus2" class="status-message"></div>
                
                <!-- íŒŒì‹±ëœ Q&A í‘œì‹œ ì˜ì—­ -->
                <div id="parsedDataView2" style="display: none; margin-top: 20px; background: white; border-radius: 10px; padding: 20px; max-height: 400px; overflow-y: auto; border: 1px solid #ddd;">
                    <h4 style="margin-bottom: 15px; color: #2c3e50;">ğŸ“‹ íŒŒì‹±ëœ Q&A ë°ì´í„°</h4>
                    <div id="parsedDataContent2"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('AI ì±—ë´‡ í˜ì´ì§€ ë¡œë“œ ì‹œì‘');
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì–¸ì–´ ì„¤ì • ë³µì›
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedLanguage2();
            console.log('ì–¸ì–´ ì„¤ì • ë³µì› ì™„ë£Œ, í˜„ì¬ ì–¸ì–´:', currentLanguage2);
            
            // Galaxy XCover 5 ë° ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ìµœì í™”
            optimizeForKakaoAndGalaxyXCover5();
            
            // ì•½ê°„ì˜ ì§€ì—° í›„ ì–¸ì–´ ë²„íŠ¼ ì—…ë°ì´íŠ¸ (DOM ì™„ì „ ë¡œë“œ í›„)
            setTimeout(() => {
                updateLanguageButtons2();
            }, 100);
        });

        // ì „ì—­ ë³€ìˆ˜ (ê¸°ì¡´ê³¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ 2ë¥¼ ë¶™ì„)
        let apiSettings2 = {
            chatgpt: { apiKey: '', model: '', enabled: false },
            gemini: { apiKey: '', model: '', enabled: false },
            claude: { apiKey: '', model: '', enabled: false },
            activeProvider: ''
        };
        
        let knowledgeBase2 = {
            files: [],
            content: '',
            parsedData: [],
            enabled: false
        };
        
        // ì–¸ì–´ ì„¤ì • ì „ì—­ ë³€ìˆ˜
        let currentLanguage2 = 'ko'; // ê¸°ë³¸ ì–¸ì–´: í•œêµ­ì–´
        
        // Galaxy XCover 5 ë° ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ìµœì í™” í•¨ìˆ˜
        function optimizeForKakaoAndGalaxyXCover5() {
            const userAgent = navigator.userAgent;
            const isKakaoTalk = userAgent.includes('KAKAOTALK') || userAgent.includes('KAKAO');
            const isGalaxyXCover5 = userAgent.includes('SM-G525N') || 
                                   (window.screen.width <= 432 && window.screen.height <= 900);
            
            console.log('ë¸Œë¼ìš°ì € ìµœì í™” ì‹œì‘:', {
                userAgent: userAgent,
                isKakaoTalk: isKakaoTalk,
                isGalaxyXCover5: isGalaxyXCover5,
                screenWidth: window.screen.width,
                screenHeight: window.screen.height
            });
            
            if (isKakaoTalk || isGalaxyXCover5) {
                // ë©”ì¸ ì»¨í…Œì´ë„ˆ ìµœì í™”
                const chatbotMain = document.querySelector('.chatbot-main');
                if (chatbotMain) {
                    chatbotMain.style.height = '100vh';
                    chatbotMain.style.minHeight = '100vh';
                    chatbotMain.style.overflow = 'hidden';
                    chatbotMain.style.position = 'fixed';
                    chatbotMain.style.display = 'flex';
                    chatbotMain.style.flexDirection = 'column';
                }
                
                // ë©”ì‹œì§€ ì˜ì—­ ìµœì í™”
                const messagesContainer = document.querySelector('.chatbot-messages');
                if (messagesContainer) {
                    messagesContainer.style.flex = '1';
                    messagesContainer.style.overflowY = 'auto';
                    messagesContainer.style.webkitOverflowScrolling = 'touch';
                    messagesContainer.style.maxHeight = 'none';
                }
                
                // ì–¸ì–´ ì„ íƒ ì˜ì—­ ìµœì í™”
                const languageSelector = document.querySelector('.language-selector');
                if (languageSelector) {
                    languageSelector.style.position = 'relative';
                    languageSelector.style.flexShrink = '0';
                    languageSelector.style.background = '#f8f9fa';
                    languageSelector.style.borderTop = '2px solid #e9ecef';
                    languageSelector.style.padding = '8px 15px 15px 15px';
                    languageSelector.style.minHeight = '55px';
                    languageSelector.style.zIndex = '100';
                    languageSelector.style.boxSizing = 'border-box';
                    languageSelector.style.width = '100%';
                    languageSelector.style.left = '0';
                    languageSelector.style.bottom = '0';
                    
                    // ì–¸ì–´ ë²„íŠ¼ë“¤ ìµœì í™”
                    const languageButtons = languageSelector.querySelectorAll('.language-btn');
                    languageButtons.forEach(button => {
                        button.style.padding = '5px 10px';
                        button.style.fontSize = '12px';
                        button.style.borderRadius = '12px';
                        button.style.touchAction = 'manipulation';
                        button.style.webkitTouchCallout = 'none';
                        button.style.webkitUserSelect = 'none';
                        button.style.userSelect = 'none';
                    });
                }
                
                // ì…ë ¥ ì˜ì—­ ìµœì í™”
                const inputContainer = document.querySelector('.chatbot-input');
                if (inputContainer) {
                    inputContainer.style.flexShrink = '0';
                    inputContainer.style.position = 'relative';
                    inputContainer.style.bottom = '0';
                    inputContainer.style.width = '100%';
                    inputContainer.style.boxSizing = 'border-box';
                }
                
                console.log('ì¹´ì¹´ì˜¤í†¡/Galaxy XCover 5 ìµœì í™” ì™„ë£Œ');
            }
            
            // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€
            window.addEventListener('resize', function() {
                if (isKakaoTalk || isGalaxyXCover5) {
                    setTimeout(() => {
                        optimizeForKakaoAndGalaxyXCover5();
                    }, 100);
                }
            });
            
            // í„°ì¹˜ ì´ë²¤íŠ¸ ìµœì í™”
            if (isKakaoTalk) {
                document.addEventListener('touchstart', function(e) {
                    // í„°ì¹˜ ì´ë²¤íŠ¸ ê°œì„ 
                }, { passive: true });
            }
        }
        
        // ì–¸ì–´ë³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
        const languagePrompts2 = {
            ko: 'ë‹¹ì‹ ì€ í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ì˜ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤. í•œêµ­ì–´ë¡œ ì¹œì ˆí•˜ê³  ì „ë¬¸ì ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.',
            en: 'You are an AI consultant for Phoenix Dental. Please respond in English in a friendly and professional manner.',
            ru: 'Ğ’Ñ‹ - AI-ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ğ½Ñ‚ ÑÑ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ ĞºĞ»Ğ¸Ğ½Ğ¸ĞºĞ¸ Phoenix. ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ğ¾ Ğ¸ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾.',
            ja: 'ã‚ãªãŸã¯ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹æ­¯ç§‘ã®AIã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã§ã™ã€‚æ—¥æœ¬èªã§è¦ªåˆ‡ã§å°‚é–€çš„ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚'
        };
        
                // ì–¸ì–´ë³„ í™•ì¸ ë©”ì‹œì§€
        const languageConfirmMessages2 = {
            ko: 'ğŸ‡°ğŸ‡· í•œêµ­ì–´ë¡œ ìƒë‹´ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?',
            en: 'ğŸ‡ºğŸ‡¸ I will assist you in English! How can I help you?',
            ru: 'ğŸ‡·ğŸ‡º Ğ¯ Ğ±ÑƒĞ´Ñƒ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ÑŒ Ğ²Ğ°Ğ¼ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ! Ğ§ĞµĞ¼ Ğ¼Ğ¾Ğ³Ñƒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ?',
            ja: 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èªã§ã”ç›¸è«‡ã‚’æ‰¿ã‚Šã¾ã™ï¼ã©ã®ã‚ˆã†ãªã”è³ªå•ã§ã—ã‚‡ã†ã‹ï¼Ÿ'
        };
        
        // ì–¸ì–´ë³„ ê¸°ë³¸ ì‘ë‹µ ê°ì²´
        const defaultResponses2 = {
            ko: {
                clinicHours: `ğŸ•˜ <strong>í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ì§„ë£Œì‹œê°„ ì•ˆë‚´</strong><br><br>
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ“… <strong>í‰ì¼</strong>: ì˜¤ì „ 9ì‹œ ~ ì˜¤í›„ 6ì‹œ<br>
                        ğŸ“… <strong>í† ìš”ì¼</strong>: ì˜¤ì „ 9ì‹œ ~ ì˜¤í›„ 3ì‹œ<br>
                        ğŸ½ï¸ <strong>ì ì‹¬ì‹œê°„</strong>: 12ì‹œ 30ë¶„ ~ 1ì‹œ 30ë¶„<br>
                        ğŸš« <strong>íœ´ì§„</strong>: ì¼ìš”ì¼, ê³µíœ´ì¼
                    </div>`,
                        
                reservation: `ğŸ“ <strong>ì˜ˆì•½ ë° ìƒë‹´ ì•ˆë‚´</strong><br><br>
                    <div style="background: #fff8f0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸŒŸ <strong>ì˜¨ë¼ì¸ ì˜ˆì•½</strong> (ì¶”ì²œ)<br>
                        â€¢ 24ì‹œê°„ ì–¸ì œë“  ì˜ˆì•½ ê°€ëŠ¥<br>
                        â€¢ ì›í•˜ëŠ” ë‚ ì§œ/ì‹œê°„ ì„ íƒ<br>
                        â€¢ ì¦‰ì‹œ ì˜ˆì•½ í™•ì¸
                    </div>`,
                        
                cost: `ğŸ’° <strong>ì¹˜ë£Œë¹„ ì•ˆë‚´</strong><br><br>
                    <div style="background: #f8fff8; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ¦· <strong>ê¸°ë³¸ ì§„ë£Œ</strong><br>
                        â€¢ ì´ˆì§„ë£Œ: 15,000ì›<br>
                        â€¢ ì¬ì§„ë£Œ: 10,000ì›<br>
                        â€¢ ìŠ¤ì¼€ì¼ë§: 50,000ì›
                    </div>`,
                        
                location: `ğŸ¥ <strong>í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ì˜¤ì‹œëŠ” ê¸¸</strong><br><br>
                    <div style="background: #f0fff0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ“ <strong>ì£¼ì†Œ</strong><br>
                        í”¼ë‹‰ìŠ¤ì‹œ í”¼ë‹‰ìŠ¤ë¡œ 11ê¸¸ 11, í”¼ë‹‰ìŠ¤íƒ€ì›Œ 11ì¸µ 11í˜¸<br><br>
                        ğŸš‡ <strong>ì§€í•˜ì² </strong><br>
                        2í˜¸ì„  ê°•ë‚¨ì—­ 3ë²ˆ ì¶œêµ¬ â†’ ë„ë³´ 5ë¶„
                    </div>`,
                        
                welcome: `ğŸ˜Š <strong>ì•ˆë…•í•˜ì„¸ìš”! í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤</strong><br><br>
                    <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%); padding: 20px; border-radius: 12px; margin: 10px 0;">
                        ğŸ¥ <strong>í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</strong><br><br>
                        ğŸ’¡ <strong>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</strong><br>
                        â€¢ ì§„ë£Œì‹œê°„ ë° ì˜ˆì•½ ì•ˆë‚´<br>
                        â€¢ ì¹˜ë£Œ ë¹„ìš© ìƒë‹´<br>
                        â€¢ ì˜¤ì‹œëŠ” ê¸¸ ì•ˆë‚´
                    </div>`
            },
            en: {
                clinicHours: `ğŸ•˜ <strong>Phoenix Dental Clinic Hours</strong><br><br>
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ“… <strong>Weekdays</strong>: 9:00 AM ~ 6:00 PM<br>
                        ğŸ“… <strong>Saturday</strong>: 9:00 AM ~ 3:00 PM<br>
                        ğŸ½ï¸ <strong>Lunch Break</strong>: 12:30 PM ~ 1:30 PM<br>
                        ğŸš« <strong>Closed</strong>: Sunday, Holidays
                    </div>`,
                        
                reservation: `ğŸ“ <strong>Reservation & Consultation Guide</strong><br><br>
                    <div style="background: #fff8f0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸŒŸ <strong>Online Reservation</strong> (Recommended)<br>
                        â€¢ Available 24/7<br>
                        â€¢ Choose your preferred date/time<br>
                        â€¢ Instant confirmation
                    </div>`,
                        
                cost: `ğŸ’° <strong>Treatment Cost Information</strong><br><br>
                    <div style="background: #f8fff8; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ¦· <strong>Basic Treatment</strong><br>
                        â€¢ First Visit: â‚©15,000<br>
                        â€¢ Follow-up: â‚©10,000<br>
                        â€¢ Scaling: â‚©50,000
                    </div>`,
                        
                location: `ğŸ¥ <strong>Phoenix Dental Location</strong><br><br>
                    <div style="background: #f0fff0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ“ <strong>Address</strong><br>
                        11-11 Phoenix Tower, 11th Floor, Phoenix-ro 11-gil, Phoenix City<br><br>
                        ğŸš‡ <strong>Subway</strong><br>
                        Line 2, Gangnam Station Exit 3 â†’ 5 min walk
                    </div>`,
                        
                welcome: `ğŸ˜Š <strong>Hello! Phoenix Dental AI Consultant</strong><br><br>
                    <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%); padding: 20px; border-radius: 12px; margin: 10px 0;">
                        ğŸ¥ <strong>Welcome to Phoenix Dental!</strong><br><br>
                        ğŸ’¡ <strong>How can I help you?</strong><br>
                        â€¢ Clinic hours & appointments<br>
                        â€¢ Treatment costs<br>
                        â€¢ Location & directions
                    </div>`
            },
            ru: {
                clinicHours: `ğŸ•˜ <strong>Ğ§Ğ°ÑÑ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ÑÑ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Phoenix</strong><br><br>
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ“… <strong>Ğ‘ÑƒĞ´Ğ½Ğ¸Ğµ Ğ´Ğ½Ğ¸</strong>: 9:00 ~ 18:00<br>
                        ğŸ“… <strong>Ğ¡ÑƒĞ±Ğ±Ğ¾Ñ‚Ğ°</strong>: 9:00 ~ 15:00<br>
                        ğŸ½ï¸ <strong>ĞĞ±ĞµĞ´ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ€Ñ‹Ğ²</strong>: 12:30 ~ 13:30<br>
                        ğŸš« <strong>Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ</strong>: Ğ’Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ, Ğ¿Ñ€Ğ°Ğ·Ğ´Ğ½Ğ¸ĞºĞ¸
                    </div>`,
                        
                reservation: `ğŸ“ <strong>Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ¸ ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ğ¸</strong><br><br>
                    <div style="background: #fff8f0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸŒŸ <strong>ĞĞ½Ğ»Ğ°Ğ¹Ğ½ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ</strong> (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)<br>
                        â€¢ Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ 24/7<br>
                        â€¢ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑƒĞ´Ğ¾Ğ±Ğ½ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ/Ğ²Ñ€ĞµĞ¼Ñ<br>
                        â€¢ ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ
                    </div>`,
                        
                cost: `ğŸ’° <strong>Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ</strong><br><br>
                    <div style="background: #f8fff8; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ¦· <strong>Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ</strong><br>
                        â€¢ ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸ĞµĞ¼: â‚©15,000<br>
                        â€¢ ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸ĞµĞ¼: â‚©10,000<br>
                        â€¢ Ğ§Ğ¸ÑÑ‚ĞºĞ° Ğ·ÑƒĞ±Ğ¾Ğ²: â‚©50,000
                    </div>`,
                        
                location: `ğŸ¥ <strong>Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Phoenix</strong><br><br>
                    <div style="background: #f0fff0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ“ <strong>ĞĞ´Ñ€ĞµÑ</strong><br>
                        Ğ³. Ğ¤ĞµĞ½Ğ¸ĞºÑ, ÑƒĞ». Ğ¤ĞµĞ½Ğ¸ĞºÑ 11-11, Ğ±Ğ°ÑˆĞ½Ñ Ğ¤ĞµĞ½Ğ¸ĞºÑ, 11 ÑÑ‚Ğ°Ğ¶<br><br>
                        ğŸš‡ <strong>ĞœĞµÑ‚Ñ€Ğ¾</strong><br>
                        Ğ›Ğ¸Ğ½Ğ¸Ñ 2, ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ ĞšĞ°Ğ½Ğ½Ğ°Ğ¼, Ğ²Ñ‹Ñ…Ğ¾Ğ´ 3 â†’ 5 Ğ¼Ğ¸Ğ½ Ğ¿ĞµÑˆĞºĞ¾Ğ¼
                    </div>`,
                        
                welcome: `ğŸ˜Š <strong>Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ! AI-ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ğ½Ñ‚ ÑÑ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Phoenix</strong><br><br>
                    <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%); padding: 20px; border-radius: 12px; margin: 10px 0;">
                        ğŸ¥ <strong>Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² ÑÑ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ Phoenix!</strong><br><br>
                        ğŸ’¡ <strong>Ğ§ĞµĞ¼ Ğ¼Ğ¾Ğ³Ñƒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ?</strong><br>
                        â€¢ Ğ§Ğ°ÑÑ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ<br>
                        â€¢ Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ<br>
                        â€¢ Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞ·Ğ´
                    </div>`
            },
            ja: {
                clinicHours: `ğŸ•˜ <strong>ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹æ­¯ç§‘ è¨ºç™‚æ™‚é–“ã®ã”æ¡ˆå†…</strong><br><br>
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ“… <strong>å¹³æ—¥</strong>: 9:00 ~ 18:00<br>
                        ğŸ“… <strong>åœŸæ›œæ—¥</strong>: 9:00 ~ 15:00<br>
                        ğŸ½ï¸ <strong>æ˜¼ä¼‘ã¿</strong>: 12:30 ~ 13:30<br>
                        ğŸš« <strong>ä¼‘è¨º</strong>: æ—¥æ›œæ—¥ã€ç¥æ—¥
                    </div>`,
                        
                reservation: `ğŸ“ <strong>äºˆç´„ãƒ»ç›¸è«‡ã®ã”æ¡ˆå†…</strong><br><br>
                    <div style="background: #fff8f0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸŒŸ <strong>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„</strong> (ãŠã™ã™ã‚)<br>
                        â€¢ 24æ™‚é–“ã„ã¤ã§ã‚‚äºˆç´„å¯èƒ½<br>
                        â€¢ ã”å¸Œæœ›ã®æ—¥æ™‚ã‚’é¸æŠ<br>
                        â€¢ å³åº§ã«äºˆç´„ç¢ºèª
                    </div>`,
                        
                cost: `ğŸ’° <strong>æ²»ç™‚è²»ã®ã”æ¡ˆå†…</strong><br><br>
                    <div style="background: #f8fff8; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ¦· <strong>åŸºæœ¬è¨ºç™‚</strong><br>
                        â€¢ åˆè¨ºæ–™: â‚©15,000<br>
                        â€¢ å†è¨ºæ–™: â‚©10,000<br>
                        â€¢ ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°: â‚©50,000
                    </div>`,
                        
                location: `ğŸ¥ <strong>ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹æ­¯ç§‘ ã‚¢ã‚¯ã‚»ã‚¹</strong><br><br>
                    <div style="background: #f0fff0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        ğŸ“ <strong>ä½æ‰€</strong><br>
                        ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹å¸‚ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹è·¯11ç•ªåœ°11ã€ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹ã‚¿ãƒ¯ãƒ¼11éš<br><br>
                        ğŸš‡ <strong>åœ°ä¸‹é‰„</strong><br>
                        2å·ç·šæ±Ÿå—é§…3ç•ªå‡ºå£ã‚ˆã‚Šå¾’æ­©5åˆ†
                    </div>`,
                        
                welcome: `ğŸ˜Š <strong>ã“ã‚“ã«ã¡ã¯ï¼ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹æ­¯ç§‘AIã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã§ã™</strong><br><br>
                    <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%); padding: 20px; border-radius: 12px; margin: 10px 0;">
                        ğŸ¥ <strong>ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹æ­¯ç§‘ã¸ã‚ˆã†ã“ãï¼</strong><br><br>
                        ğŸ’¡ <strong>ã©ã®ã‚ˆã†ãªã”è³ªå•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</strong><br>
                        â€¢ è¨ºç™‚æ™‚é–“ãƒ»äºˆç´„ã«ã¤ã„ã¦<br>
                        â€¢ æ²»ç™‚è²»ã«ã¤ã„ã¦<br>
                        â€¢ ã‚¢ã‚¯ã‚»ã‚¹ãƒ»é“æ¡ˆå†…
                    </div>`
            }
        };

        // ì–¸ì–´ ì„¤ì • í•¨ìˆ˜
        function setLanguage2(language) {
            console.log('ì–¸ì–´ ì„¤ì •:', language);
            
            // í˜„ì¬ ì–¸ì–´ ì—…ë°ì´íŠ¸
            currentLanguage2 = language;
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì–¸ì–´ ì„¤ì • ì €ì¥
            localStorage.setItem('chatbotLanguage2', language);
            
            // ì–¸ì–´ ë²„íŠ¼ ì‹œê°ì  ì—…ë°ì´íŠ¸
            updateLanguageButtons2();
            
            // í™•ì¸ ë©”ì‹œì§€ í‘œì‹œ
            const confirmMessage = languageConfirmMessages2[language];
            addBotMessage2(confirmMessage);
            
            console.log(`ì–¸ì–´ê°€ ${language}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }
        
        // ì–¸ì–´ ë²„íŠ¼ ì‹œê°ì  ì—…ë°ì´íŠ¸
        function updateLanguageButtons2() {
            // ëª¨ë“  ì–¸ì–´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            const languages = ['ko', 'en', 'ru', 'ja'];
            languages.forEach(lang => {
                const button = document.getElementById(`langBtn-${lang}-2`);
                if (button) {
                    button.style.opacity = '0.6';
                    button.style.transform = 'scale(0.95)';
                    button.style.background = '';
                    button.style.boxShadow = '';
                }
            });
            
            // ì„ íƒëœ ì–¸ì–´ ë²„íŠ¼ ê°•ì¡°
            const selectedButton = document.getElementById(`langBtn-${currentLanguage2}-2`);
            if (selectedButton) {
                selectedButton.style.opacity = '1';
                selectedButton.style.transform = 'scale(1.05)';
                selectedButton.style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
                selectedButton.style.boxShadow = '0 4px 15px rgba(79, 172, 254, 0.4)';
                selectedButton.style.color = 'white';
                selectedButton.style.fontWeight = 'bold';
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì–¸ì–´ ì„¤ì • ë³µì›
        function loadSavedLanguage2() {
            const savedLanguage = localStorage.getItem('chatbotLanguage2');
            if (savedLanguage && ['ko', 'en', 'ru', 'ja'].includes(savedLanguage)) {
                currentLanguage2 = savedLanguage;
                updateLanguageButtons2();
            }
        }
        
        // ì–¸ì–´ë³„ ê°ì§€ í‚¤ì›Œë“œ
        const languageDetectionKeywords = {
            ko: ['ì•ˆë…•', 'ê°ì‚¬', 'ì£„ì†¡', 'ì§„ë£Œ', 'ì˜ˆì•½', 'ì¹˜ë£Œ', 'ë³‘ì›', 'ì˜ì‚¬', 'ê°„í˜¸ì‚¬', 'ìƒë‹´', 'ë¹„ìš©', 'ê°€ê²©', 'ì‹œê°„', 'ì–¸ì œ', 'ì–´ë””', 'ë¬´ì—‡', 'ì–´ë–»ê²Œ', 'ì™œ', 'ë„¤', 'ì•„ë‹ˆìš”', 'ì¢‹ìŠµë‹ˆë‹¤', 'ì•Œê² ìŠµë‹ˆë‹¤', 'ë„ì›€', 'ë¬¸ì˜', 'ì§ˆë¬¸', 'í•˜ì„¸ìš”', 'ì…ë‹ˆë‹¤', 'ì´ì—ìš”', 'í•´ì£¼ì„¸ìš”', 'ì£¼ì„¸ìš”', 'ê³ ë§™ìŠµë‹ˆë‹¤', 'ì£„ì†¡í•´ìš”', 'ì•ˆë…•í•˜ì„¸ìš”', 'ê·¸ë˜ìš”', 'ë§ì•„ìš”'],
            en: ['hello', 'thank', 'sorry', 'treatment', 'appointment', 'clinic', 'doctor', 'nurse', 'consultation', 'cost', 'price', 'time', 'when', 'where', 'what', 'how', 'why', 'yes', 'no', 'good', 'understand', 'help', 'question', 'please', 'thanks', 'hi', 'dental', 'tooth', 'teeth', 'hours', 'reservation', 'appointment', 'can', 'could', 'would', 'should'],
            ru: ['Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚', 'Ğ·Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ', 'ÑĞ¿Ğ°ÑĞ¸Ğ±Ğ¾', 'Ğ¸Ğ·Ğ²Ğ¸Ğ½Ğ¸Ñ‚Ğµ', 'Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ', 'Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ', 'ĞºĞ»Ğ¸Ğ½Ğ¸ĞºĞ°', 'Ğ²Ñ€Ğ°Ñ‡', 'Ğ¼ĞµĞ´ÑĞµÑÑ‚Ñ€Ğ°', 'ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ñ', 'ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ', 'Ñ†ĞµĞ½Ğ°', 'Ğ²Ñ€ĞµĞ¼Ñ', 'ĞºĞ¾Ğ³Ğ´Ğ°', 'Ğ³Ğ´Ğµ', 'Ñ‡Ñ‚Ğ¾', 'ĞºĞ°Ğº', 'Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ', 'Ğ´Ğ°', 'Ğ½ĞµÑ‚', 'Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾', 'Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ñ', 'Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ', 'Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ', 'Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°', 'Ğ·ÑƒĞ±', 'Ğ·ÑƒĞ±Ñ‹', 'ÑÑ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ', 'Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ', 'Ğ¼Ğ¾Ğ¶Ğ½Ğ¾', 'Ğ±ÑƒĞ´ĞµÑ‚', 'ĞµÑÑ‚ÑŒ'],
            ja: ['ã“ã‚“ã«ã¡ã¯', 'ã‚ã‚ŠãŒã¨ã†', 'ã™ã¿ã¾ã›ã‚“', 'æ²»ç™‚', 'äºˆç´„', 'ã‚¯ãƒªãƒ‹ãƒƒã‚¯', 'åŒ»å¸«', 'çœ‹è­·å¸«', 'ç›¸è«‡', 'è²»ç”¨', 'æ–™é‡‘', 'æ™‚é–“', 'ã„ã¤', 'ã©ã“', 'ä½•', 'ã©ã†', 'ãªãœ', 'ã¯ã„', 'ã„ã„ãˆ', 'è‰¯ã„', 'åˆ†ã‹ã‚Š', 'æ‰‹ä¼ã„', 'è³ªå•', 'ãŠé¡˜ã„', 'æ­¯ç§‘', 'æ­¯', 'æ­¯åŒ»è€…', 'ãã ã•ã„', 'ã§ã™', 'ã¾ã™', 'ã§ã—ã‚‡ã†', 'ã©ã®', 'ãã®']
        };
        
        // ì…ë ¥ ë©”ì‹œì§€ì—ì„œ ì–¸ì–´ ê°ì§€
        function detectLanguage(message) {
            const normalizedMessage = message.toLowerCase();
            const scores = {};
            
            // ê° ì–¸ì–´ë³„ ì ìˆ˜ ê³„ì‚°
            Object.keys(languageDetectionKeywords).forEach(lang => {
                scores[lang] = 0;
                languageDetectionKeywords[lang].forEach(keyword => {
                    if (normalizedMessage.includes(keyword)) {
                        scores[lang]++;
                    }
                });
            });
            
            // ê°€ì¥ ë†’ì€ ì ìˆ˜ì˜ ì–¸ì–´ ì°¾ê¸°
            let detectedLanguage = 'ko'; // ê¸°ë³¸ê°’
            let maxScore = 0;
            
            Object.keys(scores).forEach(lang => {
                if (scores[lang] > maxScore) {
                    maxScore = scores[lang];
                    detectedLanguage = lang;
                }
            });
            
            // ìµœì†Œ 1ê°œ ì´ìƒì˜ í‚¤ì›Œë“œê°€ ë§¤ì¹­ë˜ì–´ì•¼ ì–¸ì–´ ë³€ê²½ (ë¯¼ê°ë„ ì¦ê°€)
            return maxScore >= 1 ? detectedLanguage : null;
        }
        
        // ìë™ ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
        function autoChangeLanguage(detectedLanguage) {
            if (detectedLanguage && detectedLanguage !== currentLanguage2) {
                console.log(`ì–¸ì–´ ìë™ ê°ì§€: ${currentLanguage2} â†’ ${detectedLanguage}`);
                
                // ì–¸ì–´ ë³€ê²½
                currentLanguage2 = detectedLanguage;
                localStorage.setItem('chatbotLanguage2', detectedLanguage);
                updateLanguageButtons2();
                
                // ì–¸ì–´ ë³€ê²½ ì•Œë¦¼ ë©”ì‹œì§€
                const changeNotifications = {
                    ko: 'ğŸ”„ í•œêµ­ì–´ë¡œ ì–¸ì–´ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.',
                    en: 'ğŸ”„ Language changed to English.',
                    ru: 'ğŸ”„ Ğ¯Ğ·Ñ‹Ğº Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹.',
                    ja: 'ğŸ”„ è¨€èªãŒæ—¥æœ¬èªã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚'
                };
                
                const notification = changeNotifications[detectedLanguage];
                if (notification) {
                    addBotMessage2(notification);
                }
                
                return true;
            }
            return false;
        }

        // ë©”ì‹œì§€ ì „ì†¡ í•¨ìˆ˜
        function sendMessage2() {
            console.log('ë©”ì‹œì§€ ì „ì†¡');
            const input = document.getElementById('chatbotInput2');
            const message = input.value.trim();
            
            if (message) {
                // ë©”ì‹œì§€ ì¶”ê°€
                addUserMessage2(message);
                input.value = '';
                input.style.height = '45px';
                
                // ì–¸ì–´ ìë™ ê°ì§€ ë° ë³€ê²½
                const detectedLanguage = detectLanguage(message);
                const languageChanged = autoChangeLanguage(detectedLanguage);
                
                // "AI ê´€ë¦¬ì"ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ê°ì§€í•˜ë©´ ê´€ë¦¬ì ë²„íŠ¼ ì œê³µ (ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ìŒ)
                const normalizedMessage = message.toLowerCase().replace(/\s+/g, '');
                if (normalizedMessage === "aiê´€ë¦¬ì" || normalizedMessage === "aiê´€ë¦¬ìë²„íŠ¼" || message === "AI ê´€ë¦¬ì" || message === "AIê´€ë¦¬ì" || message === "AIê´€ë¦¬ì ë²„íŠ¼") {
                    const adminButtonMessage = `
                        ğŸ”‘ <strong>AI ê´€ë¦¬ì ê¸°ëŠ¥ì„ ìš”ì²­í•˜ì…¨ìŠµë‹ˆë‹¤.</strong><br><br>
                        ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ AI ì±—ë´‡ ê´€ë¦¬ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ì„¸ìš”.<br><br>
                        <div style="background: #f8f9fa; border-radius: 10px; padding: 15px; margin-bottom: 15px; font-size: 14px; color: #495057;">
                            <strong>ğŸ’¡ ê´€ë¦¬ì ê¸°ëŠ¥ ì•ˆë‚´:</strong><br>
                            â€¢ API ì„¤ì • (ChatGPT, Gemini, Claude)<br>
                            â€¢ ì§€ì‹ë² ì´ìŠ¤ íŒŒì¼ ì—…ë¡œë“œ ë° ê´€ë¦¬<br>
                            â€¢ ì±—ë´‡ ì‘ë‹µ ì„¤ì • ë° í…ŒìŠ¤íŠ¸<br>
                            â€¢ ê³ ê¸‰ ì„¤ì • ë° ëª¨ë‹ˆí„°ë§
                        </div>
                        <button class="admin-button" onclick="loginChatbotAdmin2()" style="
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            color: white;
                            border: none;
                            padding: 12px 24px;
                            border-radius: 25px;
                            font-size: 16px;
                            font-weight: bold;
                            cursor: pointer;
                            transition: all 0.3s;
                            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                        ">ğŸ¤– AIì±—ë´‡ ê´€ë¦¬ ë¡œê·¸ì¸</button>
                    `;
                    
                    addBotMessage2(adminButtonMessage);
                    return;
                }
                
                // ì–¸ì–´ê°€ ë³€ê²½ë˜ì—ˆë‹¤ë©´ ì ì‹œ ëŒ€ê¸° í›„ ë‹µë³€ ìƒì„± (ë³€ê²½ ì•Œë¦¼ì´ ë¨¼ì € í‘œì‹œë˜ë„ë¡)
                const delay = languageChanged ? 1000 : 0;
                
                setTimeout(() => {
                    const loadingMessages = {
                        ko: 'ğŸ‘©â€âš•ï¸ğŸ• ìµœê³ ì˜ ë‹µë³€ì„ ì¤€ë¹„ ì¤‘ ì…ë‹ˆë‹¤...',
                        en: 'ğŸ‘©â€âš•ï¸ğŸ• Preparing the best answer...',
                        ru: 'ğŸ‘©â€âš•ï¸ğŸ• Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚...',
                        ja: 'ğŸ‘©â€âš•ï¸ğŸ• æœ€é«˜ã®å›ç­”ã‚’æº–å‚™ä¸­ã§ã™...'
                    };
                    const loadingMessage = addBotMessage2(loadingMessages[currentLanguage2] || loadingMessages['ko']);
                    
                    generateAIResponse2(message).then(response => {
                        stopClockAnimation2(loadingMessage);
                        loadingMessage.remove();
                        addBotMessage2(response);
                    }).catch(error => {
                        console.error('AI ì‘ë‹µ ì˜¤ë¥˜:', error);
                        stopClockAnimation2(loadingMessage);
                        loadingMessage.remove();
                        const errorMessages = {
                            ko: 'âŒ ì£„ì†¡í•©ë‹ˆë‹¤. ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
                            en: 'âŒ Sorry, a temporary error has occurred. Please try again later.',
                            ru: 'âŒ Ğ˜Ğ·Ğ²Ğ¸Ğ½Ğ¸Ñ‚Ğµ, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ĞµÑ‰Ğµ Ñ€Ğ°Ğ· Ğ¿Ğ¾Ğ·Ğ¶Ğµ.',
                            ja: 'âŒ ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚ä¸€æ™‚çš„ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚'
                        };
                        addBotMessage2(errorMessages[currentLanguage2] || errorMessages['ko']);
                    });
                }, delay);
            }
        }

        function sendQuickMessage2(message) {
            console.log('ë¹ ë¥¸ ë©”ì‹œì§€:', message);
            addUserMessage2(message);
            
            // ì–¸ì–´ ìë™ ê°ì§€ ë° ë³€ê²½
            const detectedLanguage = detectLanguage(message);
            const languageChanged = autoChangeLanguage(detectedLanguage);
            
            // "AIê´€ë¦¬ì ë²„íŠ¼"ì´ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ê°ì§€í•˜ë©´ ê´€ë¦¬ì ë²„íŠ¼ ì œê³µ
            if (message === "AIê´€ë¦¬ì ë²„íŠ¼") {
                const adminButtonMessage = `
                    ğŸ”‘ <strong>AI ê´€ë¦¬ì ê¸°ëŠ¥ì„ ìš”ì²­í•˜ì…¨ìŠµë‹ˆë‹¤.</strong><br><br>
                    ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ AI ì±—ë´‡ ê´€ë¦¬ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ì„¸ìš”.<br><br>
                    <button class="admin-button" onclick="loginChatbotAdmin2()" style="
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        border: none;
                        padding: 12px 24px;
                        border-radius: 25px;
                        font-size: 16px;
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s;
                        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                    ">ğŸ¤– AIì±—ë´‡ ê´€ë¦¬ ë¡œê·¸ì¸</button>
                `;
                
                addBotMessage2(adminButtonMessage);
                return;
            }
            
            // ì–¸ì–´ê°€ ë³€ê²½ë˜ì—ˆë‹¤ë©´ ì ì‹œ ëŒ€ê¸° í›„ ë‹µë³€ ìƒì„±
            const delay = languageChanged ? 1000 : 0;
            
            setTimeout(() => {
                const loadingMessages = {
                ko: 'ğŸ‘©â€âš•ï¸ğŸ• ìµœê³ ì˜ ë‹µë³€ì„ ì¤€ë¹„ ì¤‘ ì…ë‹ˆë‹¤...',
                en: 'ğŸ‘©â€âš•ï¸ğŸ• Preparing the best answer...',
                ru: 'ğŸ‘©â€âš•ï¸ğŸ• Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚...',
                ja: 'ğŸ‘©â€âš•ï¸ğŸ• æœ€é«˜ã®å›ç­”ã‚’æº–å‚™ä¸­ã§ã™...'
            };
            const loadingMessage = addBotMessage2(loadingMessages[currentLanguage2] || loadingMessages['ko']);
            
            generateAIResponse2(message).then(response => {
                stopClockAnimation2(loadingMessage);
                loadingMessage.remove();
                addBotMessage2(response);
            }).catch(error => {
                console.error('AI ì‘ë‹µ ì˜¤ë¥˜:', error);
                stopClockAnimation2(loadingMessage);
                loadingMessage.remove();
                const errorMessages = {
                    ko: 'âŒ ì£„ì†¡í•©ë‹ˆë‹¤. ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
                    en: 'âŒ Sorry, a temporary error has occurred. Please try again later.',
                    ru: 'âŒ Ğ˜Ğ·Ğ²Ğ¸Ğ½Ğ¸Ñ‚Ğµ, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ĞµÑ‰Ğµ Ñ€Ğ°Ğ· Ğ¿Ğ¾Ğ·Ğ¶Ğµ.',
                    ja: 'âŒ ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚ä¸€æ™‚çš„ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚'
                };
                addBotMessage2(errorMessages[currentLanguage2] || errorMessages['ko']);
            });
            }, delay);
        }

        function handleChatKeyPress2(event) {
            const textarea = event.target;
            
            if (event.key === 'Enter' && event.shiftKey) {
                event.preventDefault();
                sendMessage2();
                return;
            }
            
            if (event.key === 'Enter') {
                setTimeout(() => {
                    autoResizeTextarea2(textarea);
                }, 0);
            }
        }

        function autoResizeTextarea2(textarea) {
            textarea.style.height = '45px';
            const scrollHeight = textarea.scrollHeight;
            const maxHeight = 120;
            
            if (scrollHeight > 45) {
                textarea.style.height = Math.min(scrollHeight, maxHeight) + 'px';
            }
        }

        function addUserMessage2(message) {
            const messagesContainer = document.getElementById('chatbotMessages2');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="message-avatar">ğŸ‘¤</div>
                <div class="message-content">${message}</div>
            `;
            messagesContainer.appendChild(messageDiv);
            scrollToBottom2();
        }

        function addBotMessage2(message) {
            const messagesContainer = document.getElementById('chatbotMessages2');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            // ë¡œë”© ë©”ì‹œì§€ì¸ì§€ í™•ì¸ (ê³µí†µ ë©”ì‹œì§€ ì¶”ê°€í•˜ì§€ ì•ŠìŒ)
            const isLoadingMessage = message.includes('ìµœê³ ì˜ ë‹µë³€ì„ ì¤€ë¹„ ì¤‘ ì…ë‹ˆë‹¤') || 
                                    message.includes('ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤') ||
                                    message.includes('Preparing the best answer') ||
                                    message.includes('Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚') ||
                                    message.includes('æœ€é«˜ã®å›ç­”ã‚’æº–å‚™ä¸­ã§ã™');
            
            // ê´€ë¦¬ì ë²„íŠ¼ ë©”ì‹œì§€ì¸ì§€ í™•ì¸ (ê³µí†µ ë©”ì‹œì§€ ì¶”ê°€í•˜ì§€ ì•ŠìŒ)
            const isAdminMessage = message.includes('AI ê´€ë¦¬ì ê¸°ëŠ¥ì„ ìš”ì²­í•˜ì…¨ìŠµë‹ˆë‹¤');
            
            let finalMessage = message;
            
            // ì–¸ì–´ ë³€ê²½ ì•Œë¦¼ ë©”ì‹œì§€ì¸ì§€ í™•ì¸ (ê³µí†µ ë©”ì‹œì§€ ì¶”ê°€í•˜ì§€ ì•ŠìŒ)
            const isLanguageChangeMessage = message.includes('ì–¸ì–´ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤') || 
                                          message.includes('Language changed to') || 
                                          message.includes('Ğ¯Ğ·Ñ‹Ğº Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½ Ğ½Ğ°') || 
                                          message.includes('è¨€èªãŒæ—¥æœ¬èªã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸ');
            
            // ë¡œë”© ë©”ì‹œì§€ì™€ ê´€ë¦¬ì ë©”ì‹œì§€, ì–¸ì–´ ë³€ê²½ ë©”ì‹œì§€ê°€ ì•„ë‹Œ ê²½ìš°ì—ë§Œ ê³µí†µ ë©”ì‹œì§€ì™€ ì˜ˆì•½ ë²„íŠ¼ ì¶”ê°€
            if (!isLoadingMessage && !isAdminMessage && !isLanguageChangeMessage) {
                const commonMessages = {
                    ko: `ğŸ’ <strong>ì¢€ë” ìì„¸í•œ ì‚¬í•­ì€ ì§ì ‘ ë°©ë¬¸í•˜ì‹œë©´ ì¹œì ˆí•˜ê²Œ ìƒë‹´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤!</strong><br><br>
                        <button class="reservation-link-btn" onclick="goToReservationPage2()" style="margin-top: 5px;">ğŸ“… ì˜ˆì•½í•˜ê¸°</button>`,
                    en: `ğŸ’ <strong>For more detailed information, please visit us directly for kind consultation!</strong><br><br>
                        <button class="reservation-link-btn" onclick="goToReservationPage2()" style="margin-top: 5px;">ğŸ“… Make Reservation</button>`,
                    ru: `ğŸ’ <strong>Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ±Ğ¾Ğ»ĞµĞµ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ğ¾ÑĞµÑ‚Ğ¸Ñ‚Ğµ Ğ½Ğ°Ñ Ğ´Ğ»Ñ ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ğ¸!</strong><br><br>
                        <button class="reservation-link-btn" onclick="goToReservationPage2()" style="margin-top: 5px;">ğŸ“… Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒÑÑ</button>`,
                    ja: `ğŸ’ <strong>è©³ç´°ã«ã¤ã„ã¦ã¯ã€ç›´æ¥ãŠè¶Šã—ã„ãŸã ã‘ã‚Œã°è¦ªåˆ‡ã«ã”ç›¸è«‡ã„ãŸã—ã¾ã™ï¼</strong><br><br>
                        <button class="reservation-link-btn" onclick="goToReservationPage2()" style="margin-top: 5px;">ğŸ“… äºˆç´„ã™ã‚‹</button>`
                };
                
                const commonMessage = commonMessages[currentLanguage2] || commonMessages['ko'];
                finalMessage += `<br><br>
                <div style="background: #f0f8ff; padding: 12px; border-radius: 8px; margin-top: 10px; text-align: center;">
                    ${commonMessage}
                </div>`;
            }
            
            messageDiv.innerHTML = `
                <div class="message-avatar">ğŸ‘©â€âš•ï¸</div>
                <div class="message-content">${finalMessage}</div>
            `;
            messagesContainer.appendChild(messageDiv);
            scrollToBottom2();
            
            // ë¡œë”© ë©”ì‹œì§€ì¸ ê²½ìš° ì‹œê³„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            if (isLoadingMessage) {
                startClockAnimation2(messageDiv);
            }
            
            return messageDiv;
        }

        function scrollToBottom2() {
            const messagesContainer = document.getElementById('chatbotMessages2');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // ì‹œê³„ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜ (í´ë¡  ì±—ë´‡ìš©)
        function startClockAnimation2(messageElement) {
            const clockEmojis = ['ğŸ•', 'ğŸ•‘', 'ğŸ•’', 'ğŸ•“', 'ğŸ•”', 'ğŸ••', 'ğŸ•–', 'ğŸ•—', 'ğŸ•˜', 'ğŸ•™', 'ğŸ•š', 'ğŸ•›'];
            let clockIndex = 0;
            
            const animationInterval = setInterval(() => {
                const messageContent = messageElement.querySelector('.message-content');
                if (messageContent) {
                    // í˜„ì¬ ë©”ì‹œì§€ì—ì„œ ì‹œê³„ ì´ëª¨í‹°ì½˜ì„ ë‹¤ìŒ ì‹œê³„ë¡œ êµì²´
                    const currentText = messageContent.innerHTML;
                    const newText = currentText.replace(/ğŸ•|ğŸ•‘|ğŸ•’|ğŸ•“|ğŸ•”|ğŸ••|ğŸ•–|ğŸ•—|ğŸ•˜|ğŸ•™|ğŸ•š|ğŸ•›/, clockEmojis[clockIndex]);
                    messageContent.innerHTML = newText;
                    
                    clockIndex = (clockIndex + 1) % clockEmojis.length;
                }
            }, 300); // 300msë§ˆë‹¤ ì‹œê³„ ë³€ê²½
            
            // ë©”ì‹œì§€ ìš”ì†Œì— ì• ë‹ˆë©”ì´ì…˜ ID ì €ì¥ (ë‚˜ì¤‘ì— ì¤‘ì§€ìš©)
            messageElement.clockAnimation = animationInterval;
        }

        // ì‹œê³„ ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì§€ í•¨ìˆ˜ (í´ë¡  ì±—ë´‡ìš©)
        function stopClockAnimation2(messageElement) {
            if (messageElement && messageElement.clockAnimation) {
                clearInterval(messageElement.clockAnimation);
                messageElement.clockAnimation = null;
            }
        }

        // AI ì‘ë‹µ ìƒì„± í•¨ìˆ˜
        function generateAIResponse2(userMessage) {
            console.log('AI ì‘ë‹µ ìƒì„± ì‹œì‘ (í´ë¡  ì±—ë´‡):', userMessage);
            
            // APIê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ AI API í˜¸ì¶œ
            if (apiSettings2.activeProvider && apiSettings2[apiSettings2.activeProvider].enabled) {
                console.log('API í˜¸ì¶œë¡œ ë‹µë³€ ìƒì„±:', apiSettings2.activeProvider);
                return callAIAPI2(userMessage);
            }
            
            // API ì„¤ì •ì´ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ FAQ ì‘ë‹µ
            console.log('ê¸°ë³¸ FAQ ì‘ë‹µ ì‚¬ìš©');
            return Promise.resolve(getDefaultResponse2(userMessage));
        }

        // ì‹¤ì œ AI API í˜¸ì¶œ í•¨ìˆ˜
        async function callAIAPI2(userMessage) {
            const provider = apiSettings2.activeProvider;
            const settings = apiSettings2[provider];
            
            // í˜„ì¬ ì–¸ì–´ì— ë”°ë¥¸ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì¶”ê°€
            const systemPrompt = languagePrompts2[currentLanguage2] || languagePrompts2['ko'];
            const fullMessage = `${systemPrompt}\n\nì‚¬ìš©ì ì§ˆë¬¸: ${userMessage}`;
            
            try {
                let response;
                
                switch (provider) {
                    case 'chatgpt':
                        response = await callChatGPTAPI2(fullMessage, settings);
                        break;
                    case 'gemini':
                        response = await callGeminiAPI2(fullMessage, settings);
                        break;
                    case 'claude':
                        response = await callClaudeAPI2(fullMessage, settings);
                        break;
                    default:
                        return getDefaultResponse2(userMessage);
                }
                
                // ì¹œì ˆí•˜ê³  ì •ë¦¬ëœ í˜•íƒœë¡œ ì‘ë‹µ í¬ë§·íŒ…
                return formatFriendlyResponse2(response, provider);
                
            } catch (error) {
                console.error('AI API í˜¸ì¶œ ì˜¤ë¥˜:', error);
                return `âŒ <strong>ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</strong><br><br>
                ì£„ì†¡í•©ë‹ˆë‹¤. AI ì„œë¹„ìŠ¤ ì—°ê²°ì— ë¬¸ì œê°€ ìˆì–´ ì ì‹œ ê¸°ë³¸ ì•ˆë‚´ë¡œ ë„ì›€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br><br>
                ${getDefaultResponse2(userMessage)}<br><br>
                <small>ğŸ’¡ ì˜¤ë¥˜ ë‚´ìš©: ${error.message}</small>`;
            }
        }

        // ì¹œì ˆí•œ ì‘ë‹µ í¬ë§·íŒ…
        function formatFriendlyResponse2(response, provider) {
            // ê¸°ë³¸ ì‘ë‹µ ì •ë¦¬
            let formattedResponse = response.trim();
            
            // ì¤„ë°”ê¿ˆê³¼ êµ¬ì¡°í™”
            formattedResponse = formattedResponse
                .replace(/\n\n/g, '<br><br>')
                .replace(/\n/g, '<br>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>');
            
            // AI ëª¨ë¸ í‘œì‹œì™€ í•¨ê»˜ ì¹œì ˆí•œ í—¤ë” ì¶”ê°€
            const providerIcon = {
                'chatgpt': 'ğŸ§ ',
                'gemini': 'ğŸ’', 
                'claude': 'ğŸ¤–'
            };
            
            const providerName = {
                'chatgpt': 'ChatGPT',
                'gemini': 'Gemini',
                'claude': 'Claude'
            };
            
            return `${providerIcon[provider]} <strong>í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ AI ìƒë‹´ì‚¬ (${providerName[provider]})</strong><br><br>
            ${formattedResponse}<br><br>
            <small>ğŸ’¡ ì¶”ê°€ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ë¬¸ì˜í•´ì£¼ì„¸ìš”!</small>`;
        }

        function getDefaultResponse2(userMessage) {
            const message = userMessage.toLowerCase();
            const responses = defaultResponses2[currentLanguage2] || defaultResponses2['ko'];
            
            // ì§„ë£Œì‹œê°„ ê´€ë ¨ í‚¤ì›Œë“œ (ë‹¤êµ­ì–´ ì§€ì›)
            const timeKeywords = {
                ko: ['ì§„ë£Œì‹œê°„', 'ì–¸ì œ', 'ëª‡ì‹œ', 'ìš´ì˜ì‹œê°„', 'ì‹œê°„'],
                en: ['hours', 'time', 'when', 'open', 'clinic hours'],
                ru: ['Ğ²Ñ€ĞµĞ¼Ñ', 'Ñ‡Ğ°ÑÑ‹', 'ĞºĞ¾Ğ³Ğ´Ğ°', 'Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°', 'Ñ€ĞµĞ¶Ğ¸Ğ¼'],
                ja: ['æ™‚é–“', 'å–¶æ¥­', 'ã„ã¤', 'è¨ºç™‚æ™‚é–“', 'ä½•æ™‚']
            };
            
            // ì˜ˆì•½ ê´€ë ¨ í‚¤ì›Œë“œ
            const reservationKeywords = {
                ko: ['ì˜ˆì•½', 'ì‹ ì²­', 'ì ‘ìˆ˜', 'ë°©ë¬¸', 'ì˜ˆì•½í•˜ê¸°'],
                en: ['reservation', 'appointment', 'booking', 'visit', 'schedule'],
                ru: ['Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ', 'Ñ€ĞµĞ·ĞµÑ€Ğ²', 'Ğ²Ğ¸Ğ·Ğ¸Ñ‚', 'Ğ¿Ğ¾ÑĞµÑ‰ĞµĞ½Ğ¸Ğµ'],
                ja: ['äºˆç´„', 'ç”³è«‹', 'å—ä»˜', 'è¨ªå•', 'ã‚¢ãƒã‚¤ãƒ³ãƒˆ']
            };
            
            // ë¹„ìš© ê´€ë ¨ í‚¤ì›Œë“œ
            const costKeywords = {
                ko: ['ë¹„ìš©', 'ê°€ê²©', 'ì–¼ë§ˆ', 'ëˆ', 'ê¸ˆì•¡', 'ìš”ê¸ˆ'],
                en: ['cost', 'price', 'fee', 'money', 'payment', 'how much'],
                ru: ['ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ', 'Ñ†ĞµĞ½Ğ°', 'Ğ´ĞµĞ½ÑŒĞ³Ğ¸', 'Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ°', 'ÑĞºĞ¾Ğ»ÑŒĞºĞ¾'],
                ja: ['è²»ç”¨', 'æ–™é‡‘', 'ã„ãã‚‰', 'ãŠé‡‘', 'ä¾¡æ ¼', 'ã‚³ã‚¹ãƒˆ']
            };
            
            // ìœ„ì¹˜ ê´€ë ¨ í‚¤ì›Œë“œ
            const locationKeywords = {
                ko: ['ìœ„ì¹˜', 'ì£¼ì†Œ', 'ì–´ë””', 'ì°¾ì•„', 'êµí†µ', 'ê¸¸', 'ì˜¤ëŠ”'],
                en: ['location', 'address', 'where', 'directions', 'way', 'how to get'],
                ru: ['Ğ°Ğ´Ñ€ĞµÑ', 'Ğ³Ğ´Ğµ', 'ĞºĞ°Ğº Ğ´Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒÑÑ', 'Ñ€Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ', 'Ğ¿Ñ€Ğ¾ĞµĞ·Ğ´'],
                ja: ['å ´æ‰€', 'ä½æ‰€', 'ã©ã“', 'ã‚¢ã‚¯ã‚»ã‚¹', 'é“', 'è¡Œãæ–¹']
            };
            
            // í˜„ì¬ ì–¸ì–´ì˜ í‚¤ì›Œë“œë¡œ ì²´í¬
            const currentKeywords = {
                time: timeKeywords[currentLanguage2] || timeKeywords['ko'],
                reservation: reservationKeywords[currentLanguage2] || reservationKeywords['ko'],
                cost: costKeywords[currentLanguage2] || costKeywords['ko'],
                location: locationKeywords[currentLanguage2] || locationKeywords['ko']
            };
            
            // í‚¤ì›Œë“œ ë§¤ì¹­
            if (currentKeywords.time.some(keyword => message.includes(keyword))) {
                return responses.clinicHours;
            }
            
            if (currentKeywords.reservation.some(keyword => message.includes(keyword))) {
                return responses.reservation;
            }
            
            if (currentKeywords.cost.some(keyword => message.includes(keyword))) {
                return responses.cost;
            }
            
            if (currentKeywords.location.some(keyword => message.includes(keyword))) {
                return responses.location;
            }
            
            // ê¸°ë³¸ í™˜ì˜ ë©”ì‹œì§€
            return responses.welcome;
        }

        function goToReservationPage2() {
            window.location.href = 'reservation.html';
        }

        // ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
        function goToMainPage() {
            window.location.href = 'index.html';
        }

        function loginChatbotAdmin2() {
            console.log('AI ì±—ë´‡ ê´€ë¦¬ ë¡œê·¸ì¸2 í´ë¦­ë¨');
            const username = prompt("AI ì±—ë´‡ ê´€ë¦¬ì ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
            if (username === "phoenix") {
                const password = prompt("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
                if (password === "phoenix") {
                    openChatbotAdmin2();
                } else {
                    alert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
                }
            } else if (username !== null) {
                alert("ì•„ì´ë””ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
            }
        }

        function openChatbotAdmin2() {
            console.log('AI ì±—ë´‡ ê´€ë¦¬ í˜ì´ì§€ ì—´ê¸°');
            document.getElementById('chatbotAdminPage2').style.display = 'block';
        }

        function closeChatbotAdmin2() {
            console.log('AI ì±—ë´‡ ê´€ë¦¬ í˜ì´ì§€ ë‹«ê¸°');
            document.getElementById('chatbotAdminPage2').style.display = 'none';
        }

        // ê´€ë¦¬ í˜ì´ì§€ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function saveApiSettings2() {
            console.log('API ì„¤ì • ì €ì¥ (í´ë¡  ì±—ë´‡)');
            
            // ChatGPT ì„¤ì •
            const chatgptModel = document.getElementById('chatgptModel2').value;
            const chatgptApiKey = document.getElementById('chatgptApiKey2').value.trim();
            const chatgptFinetuningModel = document.getElementById('chatgptFinetuningModel2').value.trim();
            
            // Gemini ì„¤ì •
            const geminiModel = document.getElementById('geminiModel2').value;
            const geminiApiKey = document.getElementById('geminiApiKey2').value.trim();
            
            // Claude ì„¤ì •
            const claudeModel = document.getElementById('claudeModel2').value;
            const claudeApiKey = document.getElementById('claudeApiKey2').value.trim();
            
            // ChatGPT ëª¨ë¸ ì²˜ë¦¬
            let finalChatGPTModel = chatgptModel;
            if (chatgptModel === 'finetuning' && chatgptFinetuningModel) {
                finalChatGPTModel = chatgptFinetuningModel;
            }
            
            // ì„¤ì • ì €ì¥
            apiSettings2.chatgpt.model = finalChatGPTModel;
            apiSettings2.chatgpt.apiKey = chatgptApiKey;
            apiSettings2.chatgpt.enabled = finalChatGPTModel && chatgptApiKey;
            
            apiSettings2.gemini.model = geminiModel;
            apiSettings2.gemini.apiKey = geminiApiKey;
            apiSettings2.gemini.enabled = geminiModel && geminiApiKey;
            
            apiSettings2.claude.model = claudeModel;
            apiSettings2.claude.apiKey = claudeApiKey;
            apiSettings2.claude.enabled = claudeModel && claudeApiKey;
            
            // í™œì„±í™”ëœ ì„œë¹„ìŠ¤ í™•ì¸
            let activeCount = 0;
            let lastActive = '';
            
            if (apiSettings2.chatgpt.enabled) {
                activeCount++;
                lastActive = 'ChatGPT';
                apiSettings2.activeProvider = 'chatgpt';
            }
            if (apiSettings2.gemini.enabled) {
                activeCount++;
                lastActive = 'Gemini';
                if (!apiSettings2.activeProvider) apiSettings2.activeProvider = 'gemini';
            }
            if (apiSettings2.claude.enabled) {
                activeCount++;
                lastActive = 'Claude';
                if (!apiSettings2.activeProvider) apiSettings2.activeProvider = 'claude';
            }
            
            if (activeCount === 0) {
                showStatus2('apiStatus2', 'âŒ ìµœì†Œ í•˜ë‚˜ì˜ AI ëª¨ë¸ì„ ì„¤ì •í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }
            
            let message = `âœ… ${activeCount}ê°œì˜ AI ëª¨ë¸ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!`;
            if (activeCount > 1) {
                message += `\nğŸ¯ ê¸°ë³¸ ì‚¬ìš© ëª¨ë¸: ${lastActive}`;
            }
            if (chatgptModel === 'finetuning') {
                message += `\nğŸ”§ Finetuning ëª¨ë¸: ${chatgptFinetuningModel}`;
            }
            
            message += `\n\nğŸš€ ì´ì œ ì±—ë´‡ì—ì„œ AI ë‹µë³€ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!`;
            
            showStatus2('apiStatus2', message, 'success');
        }

        function testApiConnection2() {
            console.log('API ì—°ê²° í…ŒìŠ¤íŠ¸ (í´ë¡  ì±—ë´‡)');
            
            if (!apiSettings2.chatgpt.enabled && !apiSettings2.gemini.enabled && !apiSettings2.claude.enabled) {
                showStatus2('apiStatus2', 'âŒ ë¨¼ì € API ì„¤ì •ì„ ì €ì¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }
            
            showStatus2('apiStatus2', 'ğŸ”„ API ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'success');
            
            testAllAPIs2().then(results => {
                const message = results.join('\n') + '\nğŸ‰ ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!';
                showStatus2('apiStatus2', message, 'success');
            }).catch(error => {
                showStatus2('apiStatus2', `âŒ API í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            });
        }

        function resetApiSettings2() {
            console.log('API ì„¤ì • ì´ˆê¸°í™” (í´ë¡  ì±—ë´‡)');
            if (confirm('ëª¨ë“  API ì„¤ì •ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì €ì¥ëœ API í‚¤ì™€ ëª¨ë¸ ì„ íƒì´ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤.')) {
                // í¼ ì´ˆê¸°í™”
                document.getElementById('chatgptModel2').value = '';
                document.getElementById('chatgptApiKey2').value = '';
                document.getElementById('chatgptFinetuningModel2').value = '';
                document.getElementById('chatgptFinetuningGroup2').style.display = 'none';
                document.getElementById('geminiModel2').value = '';
                document.getElementById('geminiApiKey2').value = '';
                document.getElementById('claudeModel2').value = '';
                document.getElementById('claudeApiKey2').value = '';
                
                // ì„¤ì • ê°ì²´ ì´ˆê¸°í™”
                apiSettings2 = {
                    chatgpt: { apiKey: '', model: '', enabled: false },
                    gemini: { apiKey: '', model: '', enabled: false },
                    claude: { apiKey: '', model: '', enabled: false },
                    activeProvider: ''
                };
                
                showStatus2('apiStatus2', 'ğŸ”„ ëª¨ë“  API ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }
        }

        function toggleFinetuningInput2(provider) {
            const selectElement = document.getElementById(`${provider}Model2`);
            const finetuningGroup = document.getElementById(`${provider}FinetuningGroup2`);
            
            if (selectElement.value === 'finetuning') {
                finetuningGroup.style.display = 'block';
            } else {
                finetuningGroup.style.display = 'none';
            }
        }

        function handleFileUpload2(event) {
            const files = event.target.files;
            console.log('íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ ì‹œì‘ (í´ë¡  ì±—ë´‡):', files.length, 'ê°œ');
            
            if (files.length === 0) return;
            
            showStatus2('knowledgeSettingsStatus2', 'ğŸ“ íŒŒì¼ì„ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'success');
            
            // íŒŒì¼ ì²˜ë¦¬ ë¡œì§ (ê°„ë‹¨ ë²„ì „)
            Array.from(files).forEach((file, index) => {
                setTimeout(() => {
                    knowledgeBase2.files.push({
                        name: file.name,
                        size: file.size,
                        uploadTime: new Date()
                    });
                    
                    if (index === files.length - 1) {
                        // ë§ˆì§€ë§‰ íŒŒì¼ ì²˜ë¦¬ ì™„ë£Œ
                        showStatus2('knowledgeSettingsStatus2', 
                            `âœ… ${files.length}ê°œ íŒŒì¼ì´ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\nğŸ’¡ "ì§€ì‹ íŒŒì¼ ì„¤ì • ì €ì¥" ë²„íŠ¼ì„ ëˆŒëŸ¬ í™œì„±í™”í•´ì£¼ì„¸ìš”.`, 
                            'success');
                    }
                }, index * 100); // ìˆœì°¨ ì²˜ë¦¬ íš¨ê³¼
            });
        }

        function handleFileDrop2(event) {
            event.preventDefault();
            event.stopPropagation();
            event.currentTarget.classList.remove('dragover');
            console.log('íŒŒì¼ ë“œë¡­ (í´ë¡  ì±—ë´‡)');
        }

        function handleDragOver2(event) {
            event.preventDefault();
            event.stopPropagation();
            event.currentTarget.classList.add('dragover');
        }

        function handleDragLeave2(event) {
            event.preventDefault();
            event.stopPropagation();
            event.currentTarget.classList.remove('dragover');
        }

        function saveKnowledgeSettings2() {
            console.log('ì§€ì‹ íŒŒì¼ ì„¤ì • ì €ì¥ (í´ë¡  ì±—ë´‡)');
            
            if (knowledgeBase2.files.length === 0) {
                showStatus2('knowledgeSettingsStatus2', 'âŒ ì—…ë¡œë“œëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.', 'error');
                return;
            }
            
            // ì§€ì‹ë² ì´ìŠ¤ í™œì„±í™”
            knowledgeBase2.enabled = true;
            
            showStatus2('knowledgeSettingsStatus2', 
                `âœ… ì§€ì‹ íŒŒì¼ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\nğŸ“š ì´ ${knowledgeBase2.files.length}ê°œ íŒŒì¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.\nğŸ¤– ì´ì œ ì±—ë´‡ì´ ì—…ë¡œë“œëœ ì§€ì‹ì„ í™œìš©í•©ë‹ˆë‹¤.`, 
                'success');
        }

        function testKnowledgeBase2() {
            console.log('ì§€ì‹ë² ì´ìŠ¤ í…ŒìŠ¤íŠ¸ (í´ë¡  ì±—ë´‡)');
            
            if (!knowledgeBase2.enabled || knowledgeBase2.files.length === 0) {
                showStatus2('knowledgeSettingsStatus2', 'âŒ í™œì„±í™”ëœ ì§€ì‹ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }
            
            const testQueries = ['ì§„ë£Œì‹œê°„', 'ì˜ˆì•½', 'ë¹„ìš©', 'ìœ„ì¹˜'];
            let testResults = [];
            
            testQueries.forEach(query => {
                // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜
                const hasMatch = Math.random() > 0.3; // 70% í™•ë¥ ë¡œ ë§¤ì¹­
                if (hasMatch) {
                    testResults.push(`âœ… "${query}" - ë‹µë³€ ë°œê²¬`);
                } else {
                    testResults.push(`âŒ "${query}" - ë‹µë³€ ì—†ìŒ`);
                }
            });
            
            const successCount = testResults.filter(r => r.includes('âœ…')).length;
            const message = `ğŸ” ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ ê²°ê³¼ (${successCount}/${testQueries.length})\n${testResults.join('\n')}`;
            
            showStatus2('knowledgeSettingsStatus2', message, successCount > 0 ? 'success' : 'error');
        }

        function showParsedData2() {
            console.log('íŒŒì‹±ëœ ë°ì´í„° ë³´ê¸° (í´ë¡  ì±—ë´‡)');
            const viewElement = document.getElementById('parsedDataView2');
            const contentElement = document.getElementById('parsedDataContent2');
            
            contentElement.innerHTML = `
                <p style="text-align: center; color: #666; padding: 20px;">
                    ğŸ“š í´ë¡  ì±—ë´‡ì˜ ì§€ì‹ íŒŒì¼ ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.<br>
                    ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì—…ë¡œë“œëœ íŒŒì¼ë“¤ì˜ íŒŒì‹±ëœ Q&A ë°ì´í„°ê°€ í‘œì‹œë©ë‹ˆë‹¤.
                </p>
            `;
            
            if (viewElement.style.display === 'none') {
                viewElement.style.display = 'block';
            } else {
                viewElement.style.display = 'none';
            }
        }

        function clearAllKnowledge2() {
            console.log('ëª¨ë“  ì§€ì‹ ì‚­ì œ (í´ë¡  ì±—ë´‡)');
            if (confirm('ëª¨ë“  ì—…ë¡œë“œëœ ì§€ì‹ íŒŒì¼ê³¼ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                // ì§€ì‹ë² ì´ìŠ¤ ì´ˆê¸°í™”
                knowledgeBase2 = {
                    files: [],
                    content: '',
                    parsedData: [],
                    enabled: false
                };
                
                // íŒŒì¼ ì…ë ¥ ì´ˆê¸°í™”
                document.getElementById('fileInput2').value = '';
                document.getElementById('fileList2').innerHTML = '';
                document.getElementById('parsedDataView2').style.display = 'none';
                
                showStatus2('knowledgeSettingsStatus2', 'ğŸ—‘ï¸ ëª¨ë“  ì§€ì‹ ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }
        }

        // ì‹¤ì œ API í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        async function testAllAPIs2() {
            const testResults = [];
            const testMessage = "ì•ˆë…•í•˜ì„¸ìš”. API ì—°ê²° í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.";
            
            if (apiSettings2.chatgpt.enabled) {
                try {
                    await callChatGPTAPI2(testMessage, apiSettings2.chatgpt);
                    testResults.push('âœ… ChatGPT API ì—°ê²° ì„±ê³µ');
                } catch (error) {
                    testResults.push(`âŒ ChatGPT API ì˜¤ë¥˜: ${error.message}`);
                }
            }
            
            if (apiSettings2.gemini.enabled) {
                try {
                    await callGeminiAPI2(testMessage, apiSettings2.gemini);
                    testResults.push('âœ… Gemini API ì—°ê²° ì„±ê³µ');
                } catch (error) {
                    testResults.push(`âŒ Gemini API ì˜¤ë¥˜: ${error.message}`);
                }
            }
            
            if (apiSettings2.claude.enabled) {
                try {
                    await callClaudeAPI2(testMessage, apiSettings2.claude);
                    testResults.push('âœ… Claude API ì—°ê²° ì„±ê³µ');
                } catch (error) {
                    testResults.push(`âŒ Claude API ì˜¤ë¥˜: ${error.message}`);
                }
            }
            
            return testResults;
        }

        // ChatGPT API í˜¸ì¶œ
        async function callChatGPTAPI2(message, settings) {
            const systemPrompt = `ë‹¹ì‹ ì€ í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ë³‘ì›ì˜ ì „ë¬¸ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤. 
            ë§¤ìš° ì¹œì ˆí•˜ê³  ì „ë¬¸ì ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.

            === ë³‘ì› ê¸°ë³¸ ì •ë³´ ===
            â€¢ ë³‘ì›ëª…: í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ë³‘ì›
            â€¢ ì›ì¥: í™ê¸¸ë™ (25ë…„ ê²½ë ¥ ì¹˜ì£¼ì§ˆí™˜ ì „ë¬¸ì˜)
            â€¢ ì§„ë£Œì‹œê°„: í‰ì¼ 09:00-18:00, í† ìš”ì¼ 09:00-15:00, ì ì‹¬ì‹œê°„ 12:30-13:30
            â€¢ íœ´ì§„: ì¼ìš”ì¼, ê³µíœ´ì¼
            â€¢ ì „í™”: 070-1234-1234 (24ì‹œê°„ ì‘ê¸‰ìƒë‹´ ê°€ëŠ¥)
            â€¢ ì£¼ì†Œ: í”¼ë‹‰ìŠ¤ì‹œ í”¼ë‹‰ìŠ¤ë¡œ 11ê¸¸ 11, í”¼ë‹‰ìŠ¤íƒ€ì›Œ 11ì¸µ 11í˜¸
            â€¢ êµí†µ: ì§€í•˜ì²  2í˜¸ì„  ê°•ë‚¨ì—­ 3ë²ˆ ì¶œêµ¬ ë„ë³´ 5ë¶„
            â€¢ ì£¼ì°¨: ê±´ë¬¼ ì§€í•˜ 1-3ì¸µ ë¬´ë£Œ ì£¼ì°¨ (3ì‹œê°„)

            ë‹µë³€ ê°€ì´ë“œë¼ì¸:
            1. ë§¤ìš° ì¹œì ˆí•˜ê³  ë”°ëœ»í•œ ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”
            2. ì „ë¬¸ì ì´ë©´ì„œë„ ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…í•˜ì„¸ìš”
            3. ì˜ˆì•½ì´ë‚˜ ìƒë‹´ì´ í•„ìš”í•œ ê²½ìš° ì ê·¹ ì•ˆë‚´í•˜ì„¸ìš”`;

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${settings.apiKey}`
                },
                body: JSON.stringify({
                    model: settings.model,
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: message }
                    ],
                    max_tokens: 800,
                    temperature: 0.7
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }

            const data = await response.json();
            return data.choices[0].message.content;
        }

        // Gemini API í˜¸ì¶œ
        async function callGeminiAPI2(message, settings) {
            const prompt = `ë‹¹ì‹ ì€ í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ë³‘ì›ì˜ ì „ë¬¸ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤. 
            ë§¤ìš° ì¹œì ˆí•˜ê³  ì „ë¬¸ì ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.

            === ë³‘ì› ê¸°ë³¸ ì •ë³´ ===
            â€¢ ë³‘ì›ëª…: í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ë³‘ì›
            â€¢ ì›ì¥: í™ê¸¸ë™ (25ë…„ ê²½ë ¥ ì¹˜ì£¼ì§ˆí™˜ ì „ë¬¸ì˜)
            â€¢ ì§„ë£Œì‹œê°„: í‰ì¼ 09:00-18:00, í† ìš”ì¼ 09:00-15:00, ì ì‹¬ì‹œê°„ 12:30-13:30
            â€¢ íœ´ì§„: ì¼ìš”ì¼, ê³µíœ´ì¼
            â€¢ ì „í™”: 070-1234-1234 (24ì‹œê°„ ì‘ê¸‰ìƒë‹´ ê°€ëŠ¥)
            â€¢ ì£¼ì†Œ: í”¼ë‹‰ìŠ¤ì‹œ í”¼ë‹‰ìŠ¤ë¡œ 11ê¸¸ 11, í”¼ë‹‰ìŠ¤íƒ€ì›Œ 11ì¸µ 11í˜¸

            ì§ˆë¬¸: ${message}`;

            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${settings.model}:generateContent?key=${settings.apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }],
                    generationConfig: { maxOutputTokens: 800, temperature: 0.7 }
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }

            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }

        // Claude API í˜¸ì¶œ
        async function callClaudeAPI2(message, settings) {
            const prompt = `ë‹¹ì‹ ì€ í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ë³‘ì›ì˜ ì „ë¬¸ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤. 
            ë§¤ìš° ì¹œì ˆí•˜ê³  ì „ë¬¸ì ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.

            === ë³‘ì› ê¸°ë³¸ ì •ë³´ ===
            â€¢ ë³‘ì›ëª…: í”¼ë‹‰ìŠ¤ ì¹˜ê³¼ ë³‘ì›
            â€¢ ì›ì¥: í™ê¸¸ë™ (25ë…„ ê²½ë ¥ ì¹˜ì£¼ì§ˆí™˜ ì „ë¬¸ì˜)
            â€¢ ì§„ë£Œì‹œê°„: í‰ì¼ 09:00-18:00, í† ìš”ì¼ 09:00-15:00, ì ì‹¬ì‹œê°„ 12:30-13:30
            â€¢ íœ´ì§„: ì¼ìš”ì¼, ê³µíœ´ì¼
            â€¢ ì „í™”: 070-1234-1234 (24ì‹œê°„ ì‘ê¸‰ìƒë‹´ ê°€ëŠ¥)
            â€¢ ì£¼ì†Œ: í”¼ë‹‰ìŠ¤ì‹œ í”¼ë‹‰ìŠ¤ë¡œ 11ê¸¸ 11, í”¼ë‹‰ìŠ¤íƒ€ì›Œ 11ì¸µ 11í˜¸

            ì§ˆë¬¸: ${message}`;

            const response = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-api-key': settings.apiKey,
                    'anthropic-version': '2023-06-01'
                },
                body: JSON.stringify({
                    model: settings.model,
                    max_tokens: 800,
                    messages: [{ role: "user", content: prompt }]
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }

            const data = await response.json();
            return data.content[0].text;
        }

        function showStatus2(elementId, message, type) {
            const statusElement = document.getElementById(elementId);
            statusElement.textContent = message;
            statusElement.className = `status-message status-${type}`;
            statusElement.style.display = 'block';
            
            setTimeout(() => {
                statusElement.style.display = 'none';
            }, 5000);
        }

        // í…ìŠ¤íŠ¸ ì˜ì—­ ìë™ ë¦¬ì‚¬ì´ì¦ˆ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            const chatInput = document.getElementById('chatbotInput2');
            if (chatInput) {
                chatInput.addEventListener('input', function() {
                    autoResizeTextarea2(this);
                });
            }
            
            // ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì €ì—ì„œ CSS ê°•ì œ ì¬ì ìš©
            forceStyleReload();
            
            // ê°•ë ¥í•œ ìŠ¤íƒ€ì¼ ê°•ì œ ì ìš©
            setTimeout(forceApplyStyles, 100);
            setTimeout(forceApplyStyles, 500);
            setTimeout(forceApplyStyles, 1000);
        });

        // ê°•ë ¥í•œ ìŠ¤íƒ€ì¼ ê°•ì œ ì ìš© í•¨ìˆ˜
        function forceApplyStyles() {
            // 1. ìƒë‹¨ í—¤ë” 20% í™•ëŒ€
            const chatbotHeader = document.querySelector('.chatbot-header');
            if (chatbotHeader) {
                chatbotHeader.style.setProperty('padding', '18px', 'important');
                chatbotHeader.style.setProperty('font-size', '22px', 'important');
            }
            
                         // 2. ì±—ë´‡ ì œëª© 20% í™•ëŒ€
             const chatbotTitle = document.querySelector('.chatbot-title');
             if (chatbotTitle) {
                 chatbotTitle.style.setProperty('font-size', '22px', 'important');
                 chatbotTitle.style.setProperty('font-weight', 'bold', 'important');
                 // ê°„í˜¸ì‚¬ ì´ëª¨í‹°ì½˜ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í™•ì¸
                 if (chatbotTitle.innerHTML.includes('ğŸ¤–')) {
                     chatbotTitle.innerHTML = chatbotTitle.innerHTML.replace('ğŸ¤–', 'ğŸ‘©â€âš•ï¸');
                 }
             }
            
            // 3. í™ˆ ë²„íŠ¼ 30% í™•ëŒ€
            const homeButton = document.querySelector('.home-button');
            if (homeButton) {
                homeButton.style.setProperty('width', '68px', 'important');
                homeButton.style.setProperty('height', '75px', 'important');
                homeButton.style.setProperty('left', '15px', 'important');
            }
            
            // 4. í™ˆ ì•„ì´ì½˜ 30% í™•ëŒ€
            const homeIcon = document.querySelector('.home-icon');
            if (homeIcon) {
                homeIcon.style.setProperty('font-size', '27px', 'important');
            }
            
            // 5. í™ˆ í™”ì‚´í‘œ 30% í™•ëŒ€
            const homeArrow = document.querySelector('.home-arrow');
            if (homeArrow) {
                homeArrow.style.setProperty('font-size', '17px', 'important');
                homeArrow.style.setProperty('margin-top', '3px', 'important');
            }
            
            // 6. ì…ë ¥ì°½ 20% í™•ëŒ€ ë° ìƒí–¥ ì¡°ì •
            const chatbotInput = document.querySelector('.chatbot-input');
            if (chatbotInput) {
                chatbotInput.style.setProperty('padding', '18px', 'important');
                chatbotInput.style.setProperty('margin-top', '-10px', 'important');
            }
            
            // 7. ì…ë ¥ í…ìŠ¤íŠ¸ë°•ìŠ¤ 20% í™•ëŒ€
            const inputTextarea = document.querySelector('.chatbot-input textarea');
            if (inputTextarea) {
                inputTextarea.style.setProperty('padding', '18px 24px', 'important');
                inputTextarea.style.setProperty('font-size', '22px', 'important');
                inputTextarea.style.setProperty('min-height', '65px', 'important');
                inputTextarea.style.setProperty('border-radius', '25px', 'important');
            }
            
            // 8. ì „ì†¡ ë²„íŠ¼ 20% í™•ëŒ€
            const sendButton = document.querySelector('.chatbot-send');
            if (sendButton) {
                sendButton.style.setProperty('padding', '18px 26px', 'important');
                sendButton.style.setProperty('font-size', '21px', 'important');
                sendButton.style.setProperty('min-width', '108px', 'important');
                sendButton.style.setProperty('border-radius', '25px', 'important');
            }
            
            // 9. ë©”ì‹œì§€ ì˜ì—­ ë†’ì´ ì¡°ì • (ì…ë ¥ì°½ì´ ì»¤ì§„ ë§Œí¼ ì¡°ì •)
            const chatbotMessages = document.querySelector('.chatbot-messages');
            if (chatbotMessages) {
                chatbotMessages.style.setProperty('max-height', 'calc(100vh - 220px)', 'important');
                chatbotMessages.style.setProperty('max-height', 'calc(100dvh - 220px)', 'important');
            }
            
            console.log('ê°•ë ¥í•œ ìŠ¤íƒ€ì¼ ê°•ì œ ì ìš© ì™„ë£Œ!');
        }

        // ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì €ì—ì„œ CSS ê°•ì œ ì¬ì ìš©
        function forceStyleReload() {
            // ëª¨ë°”ì¼ ê¸°ê¸° ê°ì§€
            const isMobile = window.innerWidth <= 768;
            const isKakaoTalk = navigator.userAgent.includes('KAKAO');
            
            if (isMobile || isKakaoTalk) {
                // ê° ìš”ì†Œ ì°¾ê¸°
                const chatbotHeader = document.querySelector('.chatbot-header');
                const chatbotMessages = document.querySelector('.chatbot-messages');
                const chatbotInput = document.querySelector('.chatbot-input');
                const chatbotInputTextarea = document.querySelector('.chatbot-input textarea');
                const chatbotSend = document.querySelector('.chatbot-send');
                const homeButton = document.querySelector('.home-button');
                const homeIcon = document.querySelector('.home-icon');
                const homeArrow = document.querySelector('.home-arrow');
                const chatbotTitle = document.querySelector('.chatbot-title');
                
                // ì•„ì´í° ë¯¸ë‹ˆì™€ ì•„ì´í° 11 íŠ¹ë³„ ìµœì í™”
                if (window.innerWidth <= 320) {
                    // ë§¤ìš° ì‘ì€ ê¸°ê¸°
                    if (chatbotMessages) chatbotMessages.style.maxHeight = 'calc(100vh - 55px)';
                    if (chatbotHeader) chatbotHeader.style.padding = '5px';
                    if (chatbotInput) chatbotInput.style.padding = '5px';
                    if (chatbotInputTextarea) {
                        chatbotInputTextarea.style.padding = '5px 8px';
                        chatbotInputTextarea.style.minHeight = '32px';
                        chatbotInputTextarea.style.fontSize = '14px';
                    }
                    if (chatbotSend) {
                        chatbotSend.style.padding = '5px 8px';
                        chatbotSend.style.minWidth = '50px';
                        chatbotSend.style.fontSize = '13px';
                    }
                    if (homeButton) {
                        homeButton.style.width = '32px';
                        homeButton.style.height = '38px';
                    }
                    if (homeIcon) homeIcon.style.fontSize = '13px';
                    if (homeArrow) homeArrow.style.fontSize = '7px';
                    if (chatbotTitle) chatbotTitle.style.fontSize = '12px';
                } else if (window.innerWidth <= 360) {
                    // ê°¤ëŸ­ì‹œ A ì‹œë¦¬ì¦ˆ
                    if (chatbotMessages) chatbotMessages.style.maxHeight = 'calc(100vh - 60px)';
                    if (chatbotHeader) chatbotHeader.style.padding = '6px';
                    if (chatbotInput) chatbotInput.style.padding = '6px';
                    if (chatbotInputTextarea) {
                        chatbotInputTextarea.style.padding = '6px 10px';
                        chatbotInputTextarea.style.minHeight = '36px';
                        chatbotInputTextarea.style.fontSize = '15px';
                    }
                    if (chatbotSend) {
                        chatbotSend.style.padding = '6px 10px';
                        chatbotSend.style.minWidth = '55px';
                        chatbotSend.style.fontSize = '14px';
                    }
                    if (homeButton) {
                        homeButton.style.width = '34px';
                        homeButton.style.height = '40px';
                    }
                    if (homeIcon) homeIcon.style.fontSize = '14px';
                    if (homeArrow) homeArrow.style.fontSize = '8px';
                    if (chatbotTitle) chatbotTitle.style.fontSize = '13px';
                } else if (window.innerWidth <= 375) {
                    // ì•„ì´í° SE, ì•„ì´í° ë¯¸ë‹ˆ
                    if (chatbotMessages) chatbotMessages.style.maxHeight = 'calc(100vh - 70px)';
                    if (chatbotHeader) chatbotHeader.style.padding = '8px';
                    if (chatbotInput) {
                        chatbotInput.style.padding = '8px';
                        chatbotInput.style.marginTop = '-2px';
                    }
                    if (chatbotInputTextarea) {
                        chatbotInputTextarea.style.padding = '8px 12px';
                        chatbotInputTextarea.style.minHeight = '42px';
                        chatbotInputTextarea.style.fontSize = '15px';
                    }
                    if (chatbotSend) {
                        chatbotSend.style.padding = '8px 12px';
                        chatbotSend.style.minWidth = '60px';
                        chatbotSend.style.fontSize = '14px';
                    }
                    if (homeButton) {
                        homeButton.style.width = '36px';
                        homeButton.style.height = '42px';
                    }
                    if (homeIcon) homeIcon.style.fontSize = '14px';
                    if (homeArrow) homeArrow.style.fontSize = '8px';
                    if (chatbotTitle) chatbotTitle.style.fontSize = '14px';
                } else if (window.innerWidth <= 390) {
                    // ì•„ì´í° 14/13/12 ë¯¸ë‹ˆ
                    if (chatbotMessages) chatbotMessages.style.maxHeight = 'calc(100vh - 75px)';
                    if (chatbotHeader) chatbotHeader.style.padding = '10px';
                    if (chatbotInput) {
                        chatbotInput.style.padding = '10px';
                        chatbotInput.style.marginTop = '-3px';
                    }
                    if (chatbotInputTextarea) {
                        chatbotInputTextarea.style.padding = '10px 14px';
                        chatbotInputTextarea.style.minHeight = '45px';
                        chatbotInputTextarea.style.fontSize = '16px';
                    }
                    if (chatbotSend) {
                        chatbotSend.style.padding = '10px 15px';
                        chatbotSend.style.minWidth = '65px';
                        chatbotSend.style.fontSize = '15px';
                    }
                    if (homeButton) {
                        homeButton.style.width = '40px';
                        homeButton.style.height = '45px';
                    }
                    if (homeIcon) homeIcon.style.fontSize = '16px';
                    if (homeArrow) homeArrow.style.fontSize = '10px';
                    if (chatbotTitle) chatbotTitle.style.fontSize = '15px';
                } else if (window.innerWidth <= 430) {
                    // ì•„ì´í° 11, ì•„ì´í° 14/13/12 í‘œì¤€
                    if (chatbotMessages) chatbotMessages.style.maxHeight = 'calc(100vh - 80px)';
                    if (chatbotHeader) chatbotHeader.style.padding = '12px';
                    if (chatbotInput) {
                        chatbotInput.style.padding = '12px';
                        chatbotInput.style.marginTop = '-3px';
                    }
                    if (chatbotInputTextarea) {
                        chatbotInputTextarea.style.padding = '12px 16px';
                        chatbotInputTextarea.style.minHeight = '48px';
                        chatbotInputTextarea.style.fontSize = '17px';
                    }
                    if (chatbotSend) {
                        chatbotSend.style.padding = '12px 18px';
                        chatbotSend.style.minWidth = '75px';
                        chatbotSend.style.fontSize = '16px';
                    }
                    if (homeButton) {
                        homeButton.style.width = '45px';
                        homeButton.style.height = '50px';
                    }
                    if (homeIcon) homeIcon.style.fontSize = '18px';
                    if (homeArrow) homeArrow.style.fontSize = '11px';
                    if (chatbotTitle) chatbotTitle.style.fontSize = '17px';
                } else if (window.innerWidth <= 480) {
                    // ì¤‘ê°„ í¬ê¸° í°
                    if (chatbotMessages) chatbotMessages.style.maxHeight = 'calc(100vh - 80px)';
                    if (chatbotHeader) chatbotHeader.style.padding = '10px';
                    if (chatbotInput) chatbotInput.style.padding = '10px';
                    if (homeButton) {
                        homeButton.style.width = '40px';
                        homeButton.style.height = '45px';
                    }
                    if (homeIcon) homeIcon.style.fontSize = '16px';
                    if (homeArrow) homeArrow.style.fontSize = '10px';
                    if (chatbotTitle) chatbotTitle.style.fontSize = '16px';
                } else if (window.innerWidth <= 768) {
                    // íƒœë¸”ë¦¿
                    if (chatbotMessages) chatbotMessages.style.maxHeight = 'calc(100vh - 90px)';
                    if (chatbotHeader) chatbotHeader.style.padding = '12px';
                    if (chatbotInput) chatbotInput.style.padding = '12px';
                    if (homeButton) {
                        homeButton.style.width = '45px';
                        homeButton.style.height = '50px';
                    }
                    if (homeIcon) homeIcon.style.fontSize = '18px';
                    if (homeArrow) homeArrow.style.fontSize = '11px';
                    if (chatbotTitle) chatbotTitle.style.fontSize = '17px';
                }
                
                console.log('ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € ë° ì•„ì´í° ìµœì í™” ìŠ¤íƒ€ì¼ ê°•ì œ ì¬ì ìš© ì™„ë£Œ');
            }
        }

        // í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ ìŠ¤íƒ€ì¼ ì¬ì ìš©
        window.addEventListener('resize', function() {
            setTimeout(forceStyleReload, 100);
            setTimeout(forceApplyStyles, 200);
        });

        // ì¶”ê°€ ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ê°•í™”
        window.addEventListener('load', function() {
            setTimeout(forceStyleReload, 500);
            setTimeout(forceApplyStyles, 700);
            setTimeout(forceApplyStyles, 1500);
        });

        // í„°ì¹˜ ì´ë²¤íŠ¸ í›„ì—ë„ ìŠ¤íƒ€ì¼ ì¬ì ìš© (ëª¨ë°”ì¼ ëŒ€ì‘)
        document.addEventListener('touchstart', function() {
            setTimeout(forceApplyStyles, 50);
        }, { once: true });

        // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ í›„ì—ë„ ìŠ¤íƒ€ì¼ ì¬ì ìš©
        window.addEventListener('scroll', function() {
            setTimeout(forceApplyStyles, 100);
        }, { once: true });

        // ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € íŠ¹ìˆ˜ ëŒ€ì‘
        if (navigator.userAgent.includes('KAKAO')) {
            setTimeout(forceApplyStyles, 2000);
            setTimeout(forceApplyStyles, 3000);
            
            // ì£¼ê¸°ì ìœ¼ë¡œ ìŠ¤íƒ€ì¼ í™•ì¸ ë° ì¬ì ìš©
            setInterval(function() {
                const title = document.querySelector('.chatbot-title');
                if (title && window.getComputedStyle(title).fontSize !== '22px') {
                    forceApplyStyles();
                }
            }, 5000);
        }

        // ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ì´ˆê°•ë ¥ ìŠ¤íƒ€ì¼ ê°•ì œ ì ìš©
        function megaForceApplyStyles() {
            try {
                // DOM ìš”ì†Œë“¤ ê°€ì ¸ì˜¤ê¸°
                const elements = {
                    header: document.querySelector('.chatbot-header'),
                    title: document.querySelector('.chatbot-title'),
                    homeButton: document.querySelector('.home-button'),
                    homeIcon: document.querySelector('.home-icon'),
                    homeArrow: document.querySelector('.home-arrow'),
                    input: document.querySelector('.chatbot-input'),
                    textarea: document.querySelector('.chatbot-input textarea'),
                    sendBtn: document.querySelector('.chatbot-send'),
                    messages: document.querySelector('.chatbot-messages')
                };

                // ê°•ì œë¡œ ìŠ¤íƒ€ì¼ ì ìš©
                Object.entries(elements).forEach(([key, element]) => {
                    if (element) {
                        element.style.cssText += '; '; // ê¸°ì¡´ ìŠ¤íƒ€ì¼ ë³´ì¡´
                        
                        switch(key) {
                            case 'header':
                                element.style.cssText += 'padding: 18px !important; font-size: 22px !important;';
                                break;
                                                         case 'title':
                                 element.style.cssText += 'font-size: 22px !important; font-weight: bold !important;';
                                 // ê°„í˜¸ì‚¬ ì´ëª¨í‹°ì½˜ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í™•ì¸
                                 if (element.innerHTML.includes('ğŸ¤–')) {
                                     element.innerHTML = element.innerHTML.replace('ğŸ¤–', 'ğŸ‘©â€âš•ï¸');
                                 }
                                 break;
                            case 'homeButton':
                                element.style.cssText += 'width: 68px !important; height: 75px !important; left: 15px !important;';
                                break;
                            case 'homeIcon':
                                element.style.cssText += 'font-size: 27px !important;';
                                break;
                            case 'homeArrow':
                                element.style.cssText += 'font-size: 17px !important; margin-top: 3px !important;';
                                break;
                            case 'input':
                                element.style.cssText += 'padding: 18px !important; margin-top: -10px !important;';
                                break;
                            case 'textarea':
                                element.style.cssText += 'padding: 18px 24px !important; font-size: 22px !important; min-height: 65px !important; border-radius: 25px !important;';
                                break;
                            case 'sendBtn':
                                element.style.cssText += 'padding: 18px 26px !important; font-size: 21px !important; min-width: 108px !important; border-radius: 25px !important;';
                                break;
                            case 'messages':
                                element.style.cssText += 'max-height: calc(100vh - 220px) !important;';
                                break;
                        }
                    }
                });

                console.log('ğŸ’ª ì´ˆê°•ë ¥ ìŠ¤íƒ€ì¼ ê°•ì œ ì ìš© ì™„ë£Œ!');
            } catch (error) {
                console.error('ìŠ¤íƒ€ì¼ ì ìš© ì˜¤ë¥˜:', error);
            }
        }

        // ëª¨ë“  ì´ë²¤íŠ¸ì—ì„œ ìŠ¤íƒ€ì¼ ì¬ì ìš©
        ['DOMContentLoaded', 'load', 'resize', 'focus', 'scroll', 'touchstart'].forEach(event => {
            window.addEventListener(event, () => {
                setTimeout(megaForceApplyStyles, 50);
                setTimeout(forceApplyStyles, 100);
            });
        });

        // 1ì´ˆë§ˆë‹¤ ìŠ¤íƒ€ì¼ í™•ì¸ (ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì € ì „ìš©)
        if (navigator.userAgent.includes('KAKAO')) {
            setInterval(megaForceApplyStyles, 1000);
        }

        console.log('AI ì±—ë´‡ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ - ê°•ë ¥í•œ ìŠ¤íƒ€ì¼ ì ìš© ì‹œìŠ¤í…œ í™œì„±í™”!');
    </script>
</body>
</html> 